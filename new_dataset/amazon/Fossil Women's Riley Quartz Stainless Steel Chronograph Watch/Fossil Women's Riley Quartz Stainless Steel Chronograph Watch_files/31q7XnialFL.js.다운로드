(function(h){var f=window.AmazonUIPageJS||window.P,n=f._namespace||f.attributeErrors,b=n?n("MonthlyPaymentsDetailPageAssets",""):f;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,f,n){h.when("A").register("monthly-payments-equal-pay-common",function(b){var e=b.$,a={TWISTER_DEBOUNCE_DURATION:300,counter:{checkboxShown:"salmon-mp-ep-dp-checkbox-shown",checkboxHiddenHtmlUnrecognized:"salmon-mp-ep-dp-checkbox-hidden-html-unrecognized",checkboxHiddenMissingPaymentOfferInfo:"sal-mp-ep-dp-checkbox-hidden-missing-paymentOfferInfo",
checkboxHiddenOneClickDetected:"salmon-mp-ep-dp-checkbox-hidden-one-click-detected",checkboxHiddenMissingAddToCartButton:"salmon-mp-ep-dp-checkbox-hidden-missing-add-to-cart-button",checkboxHiddenMissingBuyNowButton:"salmon-mp-ep-dp-checkbox-hidden-missing-buy-now-button",checkboxHiddenInstallmentsDetected:"salmon-mp-ep-dp-checkbox-hidden-installments-detected",checkboxChecked:"salmon-mp-ep-dp-checkbox-checked",checkboxUnchecked:"salmon-mp-ep-dp-checkbox-unchecked",checkboxCheckedAddToCartClicked:"salmon-mp-ep-dp-checkbox-checked-addtocart-clicked",
checkboxCheckedBuynowClicked:"salmon-mp-ep-dp-checkbox-checked-buynow-clicked",checkboxUncheckedAddToCartClicked:"salmon-mp-ep-dp-checkbox-unchecked-addtocart-clicked",checkboxUncheckedBuynowClicked:"salmon-mp-ep-dp-checkbox-unchecked-buynow-clicked",messageAddToCartClicked:"salmon-mp-ep-dp-message-addtocart-clicked",messageBuynowClicked:"salmon-mp-ep-dp-message-buynow-clicked",messageShown:"salmon-mp-ep-dp-message-shown",continueButtonClicked:"salmon-mp-ep-dp-continue-button-clicked",tncOpened:"salmon-mp-ep-dp-tnc-opened",
tncCheckboxChecked:"salmon-mp-ep-dp-tnc-checkbox-checked",tncCheckboxUnchecked:"salmon-mp-ep-dp-tnc-checkbox-unchecked",tncNoThankYouOrExit:"salmon-mp-ep-dp-tnc-no-thank-you-or-exit",featureNotPresent:"salmon-mp-ep-dp-feature-not-present"},reftag:{failedDataInputs:"DATA_INPUTS_NOT_FOUND:",missingPaymentOfferInfo:"MISSING_PAYMENT_OFFER_INFO:",oneClickDetected:"ONE_CLICK_DETECTED:",htmlUnrecognized:"HTML_UNRECOGNIZED:",missingAddToCartButton:"MISSING_ADD_TO_CART_BUTTON:",missingBuyNowButton:"MISSING_BUY_NOW_BUTTON:",
installmentsDetected:"INSTALLMENTS_DETECTED:"},selector:{addToCartButton:"#add-to-cart-button",buyNowButton:"#buy-now-button",oneClickButton:"#one-click-submit-btn",addToCartForm:"form#addToCart",buyNowForm:"form#buyNowCheckout",mobileWebBuyNowForm:"form#buyNow",atcPaymentOfferInfo:"#atcPaymentOfferInfo",bnPaymentOfferInfo:"#bnPaymentOfferInfo",mpEpBuyboxFinancingCheckbox:".mp-ep-buybox-financing-checkbox",monthlyPaymentsFeature:"#monthlyPayments_feature_div",installmentsMobileFeature:"#mobileapp_installmentPaymentAccordionRow",
atcDeclarative:"#atc-declarative",tabletActDeclarative:'.a-declarative[data-action\x3d"add-to-cart"]:has([id\x3d"buybox.addToCart"])',buyBoxAtcData:"#buybox-atc-data",bnSpanFirstChild:"#buyNow \x3e :first",mpPaymentOfferInfo:"#mp-ep-payment-offer-info",mpEpPriceIntegerValue:"#mp-ep-plcc-tnc-price-integ-value",mpEpPriceDecimalValue:"#mp-ep-plcc-tnc-price-decimal-value",mpEpPriceDollarIcon:"#mp-ep-plcc-price-dollar-icon"},id:{bnSpan:"buyNow",buyBoxAtcData:"buybox-atc-data",atcPaymentOfferInfo:"atcPaymentOfferInfo",
atcDeclarative:"atc-declarative",bnPaymentOfferInfo:"bnPaymentOfferInfo"},isFeaturePresent:function(){return!(!e(a.selector.monthlyPaymentsFeature).length||!e(a.selector.mpPaymentOfferInfo).length)},logCounter:function(a){f.ue&&f.ue.count&&f.ue.count(a,1)},logRefTag:function(a){e.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+("MONTHLY_PAYMENTS_"+a+f.location.href))},urlParam:function(a){try{return(new RegExp("[?\x26]"+a+"\x3d([^\x26#]*)")).exec(f.location.href)[1]||0}catch(b){return 0}},isCheckboxSelected:function(a){return!!(a&&
a.isChecked&&a.isChecked())},updateStateFromCheckbox:function(b,d){a.isCheckboxSelected(b)?d.check():d.uncheck()},isPaymentOfferInfoPresent:function(a){return!(!a.cardType||"EQUAL_PAY"!==a.offerType)}};return a});h.when("A","a-button","a-checkbox","a-modal","monthly-payments-equal-pay-common").execute("mp-ep-tnc",function(b,e,a,f,d){var h=b.$,q,c=!1,l=a(".mp-ep-buybox-financing-checkbox input[type\x3d'checkbox']"),k=a(".mp-ep-terms-and-conditions-checkbox input[type\x3d'checkbox']"),m=e(".mp-ep-terms-and-conditions-confirm-button");
b.declarative("acceptTermsAndConditionsConfirmButton","click",function(){c=!0;d.updateStateFromCheckbox(k,l);q.hide();d.logCounter(d.counter.continueButtonClicked)});b.declarative("acceptTermsAndConditionsCancelButton","click",function(){c=!1;q.hide()});b.declarative("selectMonthlyPaymentsEqualPayCheckbox","click",function(){l&&d.updateStateFromCheckbox(l,k)});b.declarative("selectEqualPayTermsAndConditionsCheckbox","click",function(){k.isChecked()?d.logCounter(d.counter.tncCheckboxChecked):d.logCounter(d.counter.tncCheckboxUnchecked)});
var r=b.debounce(function(){l=a(".mp-ep-buybox-financing-checkbox input[type\x3d'checkbox']");k=a(".mp-ep-terms-and-conditions-checkbox input[type\x3d'checkbox']");m=e(".mp-ep-terms-and-conditions-confirm-button");l.enable(!0);b.on("a:popover:beforeHide:mp-ep-terms-and-conditions-content",function(){c||d.logCounter(d.counter.tncNoThankYouOrExit)});b.on("a:popover:afterShow:mp-ep-terms-and-conditions-content",function(){q||(q=f.get(h("#mp-ep-terms-and-conditions-popover")));k.isEmpty()&&(k=a(".mp-ep-terms-and-conditions-checkbox input[type\x3d'checkbox']"));
m.isEmpty()&&(m=e(".mp-ep-terms-and-conditions-confirm-button"));d.logCounter(d.counter.tncOpened)})},d.TWISTER_DEBOUNCE_DURATION);r();b.on("a:pageUpdate",r)});h.when("A","a-checkbox","monthly-payments-equal-pay-common","a-modal").execute(function(b,e,a){function f(){if(c(a.selector.mpEpPriceIntegerValue).length&&c(a.selector.mpEpPriceDecimalValue).length&&c(a.selector.mpEpPriceDollarIcon).length){var b=r.split(".");2===b.length&&b[0]&&b[1]&&(c(a.selector.mpEpPriceDollarIcon).text("$"),c(a.selector.mpEpPriceIntegerValue).text(b[0]),
c(a.selector.mpEpPriceDecimalValue).text(b[1]))}}function d(b,d){var e="",f=c(a.selector.addToCartForm);b&&(b.cartType=d||"ADD_TO_CART",e=JSON.stringify(b));if(c(a.selector.tabletActDeclarative).length&&h(a.selector.tabletActDeclarative,e))return!0;if(f.length)return b=c(a.selector.atcPaymentOfferInfo),b.length?b.val(e):c("\x3cinput\x3e").attr({type:"hidden",name:"paymentOfferInfo",value:e,id:a.id.atcPaymentOfferInfo}).appendTo(f),!0}function h(a,b){var d=!1;(a=c(a).data())&&c.each(a,function(a,c){if(c&&
c.inputs)return c.inputs.paymentOfferInfo=b,d=!0,!1});return d}function q(){if(c(a.selector.mpEpBuyboxFinancingCheckbox).length)if(g&&k&&m)if(t)a.logRefTag(a.reftag.oneClickDetected),a.logCounter(a.counter.checkboxHiddenOneClickDetected);else if(c(a.selector.installmentsMobileFeature).length)a.logRefTag(a.reftag.installmentsDetected),a.logCounter(a.counter.checkboxHiddenInstallmentsDetected);else if(u){if(d())return a.logCounter(a.counter.checkboxShown),!1;a.logRefTag(a.reftag.failedDataInputs);a.logCounter(a.counter.checkboxHiddenHtmlUnrecognized)}else a.logRefTag(a.reftag.missingAddToCartButton),
a.logCounter(a.counter.checkboxHiddenMissingAddToCartButton);else a.logRefTag(a.reftag.missingPaymentOfferInfo),a.logCounter(a.counter.checkboxHiddenMissingPaymentOfferInfo);else if(a.isPaymentOfferInfoPresent(g))return a.logCounter(a.counter.messageShown),!1;return!0}var c=b.$;if(a.isFeaturePresent()){var l=!1,k=c(a.selector.mpPaymentOfferInfo).attr("data-cardType"),m=c(a.selector.mpPaymentOfferInfo).attr("data-offerType"),r=c(a.selector.mpPaymentOfferInfo).attr("data-productPrice"),n=c("span#mp-ep-plcc-header-msg"),
g={cardType:k,offerType:m},p=e(a.selector.mpEpBuyboxFinancingCheckbox),v=c(a.selector.monthlyPaymentsFeature),u=!!c(a.selector.addToCartButton).length,t=!!c(a.selector.oneClickButton).length;b.declarative("selectMonthlyPaymentsEqualPayCheckbox","change",function(){a.isCheckboxSelected(p)?(l=!0,d(g),a.logCounter(a.counter.checkboxChecked)):(l=!1,d(),a.logCounter(a.counter.checkboxUnchecked))});var w=b.debounce(function(){a.isFeaturePresent()?(k=c(a.selector.mpPaymentOfferInfo).attr("data-cardType"),
m=c(a.selector.mpPaymentOfferInfo).attr("data-offerType"),r=c(a.selector.mpPaymentOfferInfo).attr("data-productPrice"),n=c("span#mp-ep-plcc-header-msg"),g={cardType:k,offerType:m},p=e(a.selector.mpEpBuyboxFinancingCheckbox),v=c(a.selector.monthlyPaymentsFeature),u=!!c(a.selector.addToCartButton).length,t=!!c(a.selector.oneClickButton).length,f(),b.capabilities.isAmazonApp&&(n.removeClass("a-size-large"),n.addClass("a-size-medium")),g&&(g.mpDebug="1"===a.urlParam("mpDebug")?"1":"0"),q()?v.hide():(p.enable(!0),
l&&(p.check(),d(g),a.logCounter(a.counter.checkboxChecked))),!c(a.selector.mpEpBuyboxFinancingCheckbox).length&&a.isPaymentOfferInfoPresent(g)&&d(g),c(a.selector.addToCartButton).click(b.debounce(function(){c(a.selector.mpEpBuyboxFinancingCheckbox).length?a.isCheckboxSelected(p)?(d(g,"ADD_TO_CART"),a.logCounter(a.counter.checkboxCheckedAddToCartClicked)):a.logCounter(a.counter.checkboxUncheckedAddToCartClicked):(d(g,"ADD_TO_CART"),a.logCounter(a.counter.messageAddToCartClicked))},4E3,!0)),c(a.selector.buyNowButton).bind("click.financialOptionsCheckout",
b.debounce(function(){c(a.selector.mpEpBuyboxFinancingCheckbox).length?a.isCheckboxSelected(p)?a.logCounter(a.counter.checkboxCheckedBuynowClicked):a.logCounter(a.counter.checkboxUncheckedBuynowClicked):a.logCounter(a.counter.messageBuynowClicked)},4E3,!0)),c(a.selector.buyNowButton).bind("click.financialOptionsCheckout",function(){a.isCheckboxSelected(p)?d(g,"BUY_NOW"):c(a.selector.mpEpBuyboxFinancingCheckbox).length||d(g,"BUY_NOW")})):a.logCounter(a.featureNotPresent)},a.TWISTER_DEBOUNCE_DURATION);
w();b.on("a:pageUpdate",w)}else a.logCounter(a.featureNotPresent)});h.when("A").register("monthly-payments-bottomSheetBackgroundScroller",function(b){b=b.$;var e=b("#a-page"),a=b("body");return{disablePageScrolling:function(){var b=a.scrollTop();e.css({position:"fixed",top:"-"+b+"px"})},enablePageScrolling:function(){var b=Math.abs(e.position().top);e.css({position:"",top:""});a.scrollTop(b)}}})});