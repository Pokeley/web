(function(B){var y=window.AmazonUIPageJS||window.P,ea=y._namespace||y.attributeErrors,k=ea?ea("DetailPageImageBlockAssets",""):y;k.guardFatal?k.guardFatal(B)(k,window):k.execute(function(){B(k,window)})})(function(B,y,ea){B.register("postMetric",function(){return{postCountMetric:function(k){if("undefined"!==typeof k){var f=y.ue;if(f){var a=f.count(k)||0;f.count(k,a+1)}}},postTimeMetric:function(k,f){if("undefined"!==typeof k&&"undefined"!==typeof f){var a=y.ue;a&&a.count(k,f)}}}});"use strict";B.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});B.register("postEarlyMetric",function(){return null});"use strict";B.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(k,f,a,e){k=k.extend(!0,{},a,e);var p=new f(k);B.register("ImageBlockAPI",function(){return p.api});return p});"use strict";B.when("ImageBlockBTF").register("ImageBlockAiryLoader",function(k){function f(a){a&&(B.load.js(a),y.performance&&performance.now&&y.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",
y.parseInt(performance.now())))}function a(a){a&&B.load.css(a)}var e=k.airyConfig;void 0===e?B.when("ImageBlockATF").execute(function(k){e=k.airyConfig;f(e.jsUrl);a(e.cssUrl);y.performance&&performance.now&&y.ue&&ue.count&&ue.count("WeblabAllocationErrorCount",(ue.count("WeblabAllocationErrorCount")||0)+1)}):(f(e.jsUrl),a(e.cssUrl))});"use strict";B.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(k,f,a,e,p){var c={};return function(w){var t=
this;t.dispatch=function(a,f){var t=c[a];e.isDefined(t)&&k.each(t,function(a,c){c.call(y,f)})};t.register=function(a,f){e.isDefined(c[a])||(c[a]=[]);"function"===typeof f&&c[a].push(f)};t.model=new f(w,t);t.view=new a(w,t,t.model);t.api=new p(w,t,t.model);t.init=function(){t.model.init();t.view.init()};t.init()}});"use strict";B.when("A","imageBlockUtils").register("ImageBlockModel",function(k,f){function a(a,c,e,k,t){f.isDefined(a)&&(G.type=a);f.isDefined(c)&&(G.index=c);f.isDefined(e)&&(G.thumbnailIndex=
e);f.isDefined(k)&&(G.variant=k);f.isDefined(t)&&(G.color=t)}function e(c){a("image",0,0,"MAIN",c||t.landingAsinColor||t.defaultColor)}function p(c){c=c.data;u=k.copy(G);a(c.type,c.index,c.thumbnailIndex,c.variant,c.color)}function c(a){p(a);a=k.copy(a);a.data=k.copy(G);h.dispatch("updateView",a)}function w(){u=k.copy(G);e(G.color)}var t,h,G={},u={},H,y;return function(a,f){h=f;t=a;h.register("updateSelection",c);h.register("updateModel",p);h.register("resetModel",w);this.init=function(){e()};this.getCurrentItem=
function(){return k.copy(G)};this.getPreviousItem=function(){return k.copy(u)};this.setCurrentEvent=function(a){H=a};this.getCurrentEvent=function(){return H};this.setImmersiveViewModalInstance=function(a){y=a};this.getImmersiveViewModalInstance=function(){return y};this.updateTitle=function(a){t.title=a}}});"use strict";B.when("ImageBlockBTF","postMetric").execute(function(k,f){function a(a,c,f,e,k){function G(a){"click"===a.type&&e.postCountMetric("thumbClick");"click"===a.type&&l.overrideAltImageClickAction?
r.dispatch("thumbActionClick",a):r.dispatch("updateSelection",a)}function u(a){l.useClickZoom||r.dispatch("imageClick",a)}function H(a){l.useClickZoom||r.dispatch("imageHover",a)}function U(a){r.dispatch("button360Click",a)}function A(c){!f.isDefined(c)||"swatchClick"!==c.type&&"updatedData"!==c.type?(d.update(c),"swatchHover"!==c.type&&q.getPreviousItem().thumbnailIndex!==c.data.thumbnailIndex&&e.postCountMetric(c.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",c.data)):
d.render(c.data.color,!1,c.onload)}function E(a){r.dispatch("resize",a)}function O(a){f.selectThumbnail(a,m)}function J(a){var d=a.data,c;d&&"ingress"!==d.type&&"click"===a.type&&(c=a);return c}function K(a){var d=q.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=d;return c}var d,l,r,q,m;return function(f,e,t){d=this;l=f;r=e;q=t;m=c("#imageBlock #altImages ul");var w=c("#imageBlock .canvas"),g=c("#main-image-container"),b;d.subViews=[];for(e=0;e<k.length;e++)d.subViews.push(new k[e](f,
t,d,r));d.render=function(a,f,e){var l=0;m.find(".item").remove();a=a||q.getCurrentItem().color;c.each(d.subViews,function(b,d){l=d.render(a,l,w,m,g,f,e)||l});var r=m.find(".a-button-selected").closest(".a-declarative");b=K(r)};d.init=function(){m=c("#imageBlock #altImages ul");var b=m.find(".a-button-selected").closest(".a-declarative"),g=b.data("action"),b=b.data(g)||{};b.color=l.landingAsinColor||l.defaultColor;r.dispatch("updateModel",{data:b});d.render(b.color,!0);l.isDebug&&y.console&&console.log(l);
r.register("updateView",A);r.register("selectThumbnail",O);"function"===typeof y.markFeatureInteractive&&y.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["click","hover"]},{name:"thumbnail",events:["click","hover"]}]});l.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],G);a.declarative("thumb-action",["click"],G);a.declarative("main-image-click",["click"],u);a.declarative("main-image-click",["mouseenter","mouseleave"],H);
a.declarative("button-360-click",["click"],U);a.on("resize",E);y.performance&&performance.now&&y.ue&&ue.count&&ue.count("DPIBMouseEventsReadyTime",performance.now())};d.update=function(a){c.each(d.subViews,function(b,g){g.update(a)});l.usePeekHover&&("mouseleave"===a.type?r.dispatch("updateSelection",b):"click"===a.type&&(b=J(a)||b))}}}var e=["A","jQuery","imageBlockUtils","postMetric"].concat(k.views);B.when.apply(B,e).register("ImageBlockView",function(){for(var f=arguments[0],c=arguments[1],e=
arguments[2],k=arguments[3],h=[],G=4,u=arguments.length;G<u;G++)h.push(arguments[G]);return a(f,c,e,k,h)})});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(k,f,a,e,p,c,w){function t(b,g,d,c){if(!a.isjQueryObjDefined(b.find(".a-button-selected"))){var n=D.getCurrentItem();if(!c||"chromeless-video"!==n.type||!m.autoplayVideo){c=0;"image"===n.type&&(c=Math.max(u(n.color,n.variant),
0));var M=g+c;M>=d&&(c=0,M=g);g=a.getImageHash(n.color,c,m);-1!==g&&(F.dispatch("updateModel",{data:{index:c,thumbnailIndex:M,variant:g.variant,type:"image"}}),g=b.find(".item").get(M),a.selectGivenThumbnail(f(g),b))}}}function h(b,g,d){g=m.colorImages&&m.colorImages[g];var n=b;a.isDefined(g)&&(f.each(g,function(g,c){b<m.maxAlts&&(a.createThumbnail({type:"image",index:g,thumbnailIndex:b,variant:c.variant},c.thumb,L,"imageThumbnail"),b++)}),c.isEnabled&&w.logAltImgRequestPlacedOnThumbnails(f,c,D),
t(L,n,b,d));return b}function G(a,b){if("image"===a.type){var g=f("#image-canvas-caption #canvasCaption"),c,d=m.staticStrings,n=m.colorImages,e=a.color,l=a.index;b&&m.useIV?c=d.clickToExpand:n[e]&&n[e][l].hiRes&&m.useHoverZoom?(c=m.useHoverZoomIpad?d.touchToZoom:m.useClickZoom?d.clickToZoom:d.rollOverToZoom,m.hoverZoomIndicator&&(c="\x3cimg src\x3d'"+m.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+c)):m.useIV&&(c=d.clickToExpand);g.html(c)}}function u(b,g){return a.getIndexForVariant(b,g,m)}function H(b,
c){var d="a-dynamic-image";if(!m.acEnabled){var n;f.each(b.main,function(b,g){a.isDefined(n)||(n=parseFloat(g[1]/g[0])<=parseFloat(m.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});d+=n}var e=a.getMaxDimensionsOfMainImage(b.main,g,m),M=e[0],l=e[1],e=f("\x3cdiv\x3e\x3c/div\x3e"),M={"max-height":M,"max-width":l};e.addClass(d).css(M).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:c}).data("a-dynamic-image",b.main);return e}function y(a){var b=v.find(".swatchHoverExp");
a=H(a);b.find(".imgTagWrapper").html(a);k.loadImageManually(a);return b}function A(a){var b=g.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");m.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(m.imgTagWrapperClasses)}function E(b,g){if("image"===b.type||"unavailable"===b.type||"lazy-loaded"===b.type){var d=a.getImageHash(b.color,b.index,m);if(-1===d)return d={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},a.lazyLoadingRequired(b,D,m)?
K(b,!1,g):(F.dispatch("updateModel",d),a.showUnavailable(b.color)),-1;var n=v.find(".item.itemNo"+b.thumbnailIndex);if(!a.isjQueryObjDefined(n)){var n=b.thumbnailIndex,n=v.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+n+" maintain-height"),f=H(d,g);n.find(".placeHolder").replaceWith(f);v.find(".list").append(n);k.loadImageManually(f)}A(n);F.dispatch("loadMagnifier");G(b);m.useIV&&a.isDefined(d.hiRes)&&n.css("cursor","pointer");b.isUserGenerated&&
(n=D.getPreviousItem(),f=b.variant,a.isDefined(f)&&n.thumbnailIndex!==b.thumbnailIndex&&(c.isEnabled&&w.logAltImgRequestServed(c),p.postCountMetric("ImageThumbnailSelectedVariant:"+f),0===f.indexOf("IG")&&(p.postCountMetric("IGImageSelectedVariant:"+f),p.postCountMetric("IGImageSelectedEvent:"+b.interaction))));k.trigger("dp:image-block:update",d)}}function O(b){var g=Math.max(u(b.color,D.getCurrentItem().variant),0),g=a.getImageHash(b.color,g,m);if(-1===g)return a.lazyLoadingRequired(b,D,m)?a.lazyLoadOnHoverEnabled(m)&&
(J(".3",!0),a.spinner(v,!0),k.delay(function(){D.getCurrentEvent().data===b&&K(b,!0)},500)):a.showUnavailable(b.color),-1;var d=y(g);A(d);k.trigger("dp:image-block:update",g)}function J(b,a){a?v.css("opacity",b):f("#imageBlock").css("opacity",b)}function K(g,c,f){b=c;n=f;var l=g.color,r=m.colorToAsin[l];if(r&&r.asin){var M={};M.params={asin:r.asin,productGroupID:m.productGroupID,color:l};M.success=function(e){e?(a.ajaxState(r.asin,"success"),m.colorImages[l]=e.colorImage,a.isDefined(m.spin360ColorEnabled)&&
(m.spin360ColorEnabled[l]=e.enable360),l===g.color&&(c&&b?g===D.getCurrentEvent().data&&(d(g),O(g)):(e={type:"updatedData",data:D.getCurrentItem(),onload:f||n},F.dispatch("updateView",e))),B.register(a.rankedImagesReadyEvent(r.asin))):a.ajaxState(r.asin,"fail")};M.error=function(){a.ajaxState(r.asin,"fail")};M.indicator=a.spinner(v);a.ajaxState(r.asin,void 0)&&"fail"!==a.ajaxState(r.asin,void 0)||(J(".3",c),e.load("/gp/product/features/apparel-main-image/ranked-images.html",M),a.ajaxState(r.asin,
"sent"));return m.colorImages&&m.colorImages[l]}}function d(b,g){a.lazyLoadingRequired(b,D,m)||(f("#imageBlock").css("opacity","1"),v.css("opacity","1"),a.spinner(v,!1),v.find("li").removeClass("selected"),f("#image-canvas-caption #canvasCaption").empty(),a.hideUnavailable(),g&&v.find(".list .item").remove())}function l(){var b=v.find(".item .imgTagWrapper"),d=a.getContainerHeight(g,m.holderRatio,m.holderMaxHeight);0<d&&(g.height(d),b.height(d));v.find("img.a-dynamic-image").each(function(){var b=
f(this);b.data("a-manual-replacement")&&k.loadDynamicImage(this);var d=b.data("a-dynamic-image"),d=a.getMaxDimensionsOfMainImage(d,g,m);b.css({"max-height":d[0]+"px","max-width":d[1]+"px"})})}function r(b){G(D.getCurrentItem(),"mouseenter"===b.type)}var q,m,D,F,L,v,g,b,n,z;return function(b,c,n,f){q=this;m=b;D=c;F=f;m.colorImages[m.landingAsinColor]=m.colorImages[m.defaultColor];q.render=function(b,c,n,f,e,l,r){v=n;L=f;g=e;z=h(c,b,l);l||(b=D.getCurrentItem(),a.lazyLoadingRequired(b,D,m)&&F.dispatch("updateModel",
{data:{type:"lazy-loaded"}}));d(D.getCurrentItem(),!l);E(D.getCurrentItem(),r);return z};q.update=function(b){var g=b.data;D.setCurrentEvent(b);"ingress"!==g.type&&d(b.data,!1);"swatchHover"===b.type?g.color===D.getCurrentItem().color?E(D.getCurrentItem()):b.captured||-1===O(g)||(b.captured=!0):"image"===g.type&&(g.interaction=b.type,g.isUserGenerated=!0,"mouseenter"===b.type&&p.postCountMetric("dpcc_imageThumbHovered_"+(g.thumbnailIndex+1)+"_"+z),E(g),m.usePeekHover&&"click"!==b.type||(a.selectGivenThumbnail(b.$declarativeParent,
L),"click"===b.type&&p.postCountMetric("dpcc_imageThumbClicked_"+(g.thumbnailIndex+1)+"_"+z)))};F.register("imageHover",r);F.register("resize",l)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(k,f,a,e,p,c){function w(a){J?a.css("cursor","url('"+H.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function t(c){var d=
c.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);c={};if(a.isDefined(d))for(var d=d[1].split("_"),f=0;f<d.length;f++){var e=d[f].match(/^([A-Z]+)(\d+(\.\d+)?)$/);a.isDefined(e)&&(c[e[1]]=parseInt(e[2],10))}return c}function h(h,d){function l(){var b;d.useClickZoom?(b=d.offsetInClickZoom,b=[Math.min(1,Math.max(0,I[0]-(A[0]+b))/(A[2]-2*b)),Math.min(1,Math.max(0,I[1]-(A[1]+b))/(A[3]-2*b))]):b=z&&z.updatePosition();if(b&&n&&n.detailSize){var a=[n.detailSize[0]-n.rect.width,n.detailSize[1]-n.rect.height];
k.capabilities.rtl?n.detailImage.get(0).style.right=-(b[0]*a[0])+"px":n.detailImage.get(0).style.left=-(b[0]*a[0])+"px";n.detailImage.get(0).style.top=-(b[1]*a[1])+"px"}}function r(b){return b.offsetParent().hasClass("a-dynamic-image-container")}function q(b){var a=Z?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:"";I=Z?[a.pageX,a.pageY]:[b.pageX,b.pageY];if(k.capabilities.rtl){var g=f(y).width();I=Z?[g-a.pageX,a.pageY]:[g-b.pageX,b.pageY]}}function m(b){Z&&b.preventDefault();q(b);
d.useClickZoom?b=[A[0],A[1],A[0]+A[2],A[1]+A[3]]:(b=z?z.offset:h.offsetParent().offset(),b=H.acEnabled?[b.left,b.top,g.width()+b.left,g.height()+b.top]:[u[0]+b.left,u[1]+b.top,u[0]+u[2]+b.left,u[1]+u[3]+b.top]);I[0]<b[0]||I[1]<b[1]||I[0]>=b[2]||I[1]>=b[3]||H.acEnabled&&!r(h)?(d.fadeMagnifier?B||(B=!0,aa=setTimeout(function(){D(!0)},500)):d.useClickZoom||D(),ba&&(ba=!1,clearTimeout(C))):(ba||(ba=!0,C=setTimeout(function(){e.postCountMetric("dppc_hoverZoomOpened");p.isEnabled&&c.logHoverZoomRequestServed(p)},
1E3)),d.fadeMagnifier&&B&&(B=!1,clearTimeout(aa)),l())}function D(b){b&&v.suppressMagnifier(!0);if(R&&(n&&n.hide(),z&&(z.destroy(),z=null),R=!1,Z?(h.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),f(document).trigger("disengaged.magnifier")):f(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),G(),b))h.one("click.magnifier touchstart.magnifier",function(b){F(b,!0)})}function F(b,a){a&&v.suppressMagnifier(!1);if(!R&&!M&&(0===ha&&(e.postCountMetric("dppc_hoverTime",
new Date-(y.ue&&y.ue.t0||0)),ha=1),E[fa]||(e.postCountMetric("dppc_hoverMain"),E[fa]=1),u=[h.position().left,h.position().top,h.width(),h.height()],fa&&(q(b),n?n.refit().show():n=new U,d.useClickZoom||(z=z||new O),A=n.getWindowSize(),l()),R=!0,Z?(h.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",m).bind("touchend.magnifier",D),f(document).trigger("engaged.magnifier")):(H.acEnabled?g.unbind("mousemove.magnifier"):h.unbind("mousemove.magnifier"),f(document).trigger("engaged.magnifier").bind("mousemove.magnifier",
m)),a)){var c=f("#zoomWindow");if(0<c.length)c.one("click.magnifier touchend.magnifier",function(b){D(!0)})}}function G(){d.useHoverZoom&&(Z?h.bind("touchstart.magnifier touchmove.magnifier",F):H.acEnabled?r(h)&&g.bind("mousemove.magnifier",F):h.bind("mousemove.magnifier",F))}var v=this,g=h.offsetParent(),b={detailImageUrl:h.attr("data-old-hires"),location:"over",locationElement:h,prelaod:"ready",zIndex:50,offsetInClickZoom:50};d=f.extend(b,d);d.adjustment=[10,0,-10,0];var n=null,z=null,I=null,u=
null,A=null,T={"null":1,"":1,undefined:1},R=!1,M=!1,fa=d.detailImageUrl,Z=d.useHoverZoomIpad||0,ha=0,E={},O=function(){function b(a){var c=Math.round(Math.min(h.width(),n.rect.width/a));a=Math.round(Math.min(h.height(),n.rect.height/a));l.css({width:c,height:a});g=[c,a]}var a=this,g=[0,0],c=(n.detailSize&&n.detailSize[0]||5E8)/u[2],e=(n.detailSize&&n.detailSize[1]||5E8)/u[3],c=e>c?e:c;f("#magnifierLens").remove();var l=f("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});d.generalImageUrls.zoomLensBackground&&
l.css({backgroundImage:"url("+d.generalImageUrls.zoomLensBackground+")"});H.showMagnifierOnHover?w(l):l.css("cursor","pointer");a.updatePosition=function(){var b=[u[2]-g[0],u[3]-g[1]],c=0>=b[0]?.5:Math.max(0,Math.min(1,(I[0]-g[0]/2-u[0]-a.offset.left)/b[0])),d=0>=b[1]?.5:Math.max(0,Math.min(1,(I[1]-g[1]/2-u[1]-a.offset.top)/b[1])),f=u[0]+Math.round(c*b[0]),b=u[1]+Math.round(d*b[1]);l.get(0).style.left=f+"px";l.get(0).style.top=b+"px";return[c,d]};a.destroy=function(){l.remove()};a.offset=h.offsetParent().offset();
b(c);a.updatePosition();l.appendTo(h.parent());n.detailImage[0].complete||n.detailImage.load(function(){var g=n.detailImage.width()/u[2];b(g);a.updatePosition()})};O.preload=function(){v.preload(d.generalImageUrls.lensBackgroundUrl)};var U=function(){function b(){var g={};if("over"===d.location){var g=d.useClickZoom,e={},l=f("#leftCol"),M=f("#centerCol"),q=f("#rightCol"),m=f("#hover-zoom-end"),k=f("#actionPanelContainer"),t=a.isjQueryObjDefined(l)?l.outerHeight():M.outerHeight();e.top=a.isjQueryObjDefined(l)?
l.offset().top:M.offset().top;e.bottom=t+e.top;e.right=a.isjQueryObjDefined(q)?q.offset().left:k.offset().left;e.left=g?0:l.offset().left+l.outerWidth();a.isjQueryObjDefined(m)&&m.offset().top>e.bottom&&(e.bottom=m.offset().top);g=e}else"right"===d.location&&(g=h.offset(),g={left:g.left+h.outerWidth(),top:g.top,right:g.left+h.outerWidth()+400,bottom:g.top+400});d.minHeightElement&&(g.bottom=Math.max(g.bottom,g.top+f(d.minHeightElement).outerHeight()));g.bottom=Math.min(g.bottom,f(y).scrollTop()+f(y).height());
g.left+=n[0];g.top+=n[1];g.right+=n[2];g.bottom+=n[3];g.width=g.right-g.left;g.height=g.bottom-g.top;d.enhancedHoverOverlay&&a.isDefined(y.pageXOffset)&&(e=f(y).width(),g.width=e-g.left+y.pageXOffset-18,g.height-=14);r.css({left:g.left,top:g.top,width:g.width,height:g.height});c.rect=g;return c}function g(b){var a=new Image;c.detailSize=[0,0];a.onload=function(){c.detailSize=[a.width,a.height];l()};a.src=b.attr("src");if(0<a.width&&0<a.height)c.detailSize=[a.width,a.height];else if(d.detailImageSize)c.detailSize=
d.detailImageSize;else{b=t(a.src);var e=u[2]/u[3];b.SS||b.AA?(b=b.SS||b.AA,c.detailSize=[b,b]):b.SX?c.detailSize=[b.SX,Math.round(b.SX/e)]:b.SY?c.detailSize=[Math.round(b.SY*e),b.SY]:b.SL&&(c.detailSize=1<=e?[b.SL,Math.round(b.SL/e)]:[Math.round(b.SL*e),b.SL])}}var c=this,n=d.adjustment;f("#zoomWindow").remove();var e={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:d.zIndex};d.enhancedHoverOverlay&&(e.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",e.border="1px solid #949494",e.borderColor=
"rgb(148,148,148)");var r=f("\x3cdiv id\x3d'zoomWindow' /\x3e").css(e);d.fadeMagnifier&&r.fadeIn(200);d.useClickZoom&&(J?r.css("cursor",'url("'+d.zoomOutIcon+'"), auto'):(r.css("cursor","-webkit-zoom-out"),r.css("cursor","-moz-zoom-out"),r.css("cursor","zoom-out")));c.updateImage=function(b){b=f("\x3cimg id\x3d'detailImg' src\x3d'"+b+"'/\x3e").css("position","absolute");c.detailImage&&c.detailImage.remove();r.append(b);f(document).trigger("updated.magnifier");c.detailImage=b;g(c.detailImage)};c.refit=
function(){b();g(c.detailImage);return c};d.fadeMagnifier?(c.show=function(){r.fadeIn(200);return c},c.hide=function(){r.fadeOut(200);return c}):(c.show=function(){r.show();return c},c.hide=function(){r.hide();return c});c.destroy=function(){r.remove();return c};c.getWindowSize=function(){return[c.rect.left,c.rect.top,c.rect.width,c.rect.height]};c.updateImage(fa);b();r.appendTo(document.body)},B=!1,aa,ba=!1,C;v.preload=function(b){b=f.makeArray(b);for(var a=b.length,g=0;g<a;g++)b[g]instanceof Array?
v.preload(b[g]):"string"===typeof b[g]&&b[g]&&!T[b[g]]&&(T[b[g]]=new Image,T[b[g]].src=b[g])};v.changeImage=function(b,a){R&&D();fa=a;h.attr("src",b);v.preload(b);u=[h.position().left,h.position().top,h.width(),h.height()];a&&("immediately"===d.preload?v.preload(a,!0):f(y).ready(function(){v.preload(a)}),n?n.updateImage(a):h.attr("data-old-hires",a))};v.destroy=function(){H.acEnabled?g.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):h.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");
f(document).unbind("mousemove.magnifier");z&&z.destroy();z=null;n&&n.destroy();n=null};v.detailImage=function(){return n.detailImage};v.suppressMagnifier=function(b){M=b};v.isEngaged=function(){return R};v.engageMagnifier=F;v.disengageMagnifier=D;h[0].complete?G():h.one("load",G);v.preload(h.attr("src"));if(d.preload){var da=d.detailImageUrl,b=function(){v.preload(da,!0);d.useClickZoom||O.preload()},V=d.preload;V.constructor!==Array&&(V=[V]);for(var W=0;W<V.length;W++)if("immediately"===V[W])b();
else if(f(y)[V[W]])f(y)[V[W]](b);else f(y).bind(V[W],b)}return v}function G(){if(H.useHoverZoom){var e={adjustment:[0,0,1,1],generalImageUrls:H.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:199,useHoverZoomIpad:H.useHoverZoomIpad,useHoverZoom:H.useHoverZoom,useClickZoom:H.useClickZoom,fadeMagnifier:H.fadeMagnifier,zoomOutIcon:H.staticImages.zoomOutCur,enhancedHoverOverlay:H.enhancedHoverOverlay||H.atfEnhancedHoverOverlay};E&&(E.destroy(),E=void 0);var d=O.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");
a.isjQueryObjDefined(d)?H.useClickZoom?(d.one("click.loadmagnifier touchstart.loadmagnifier",function(a){E=new h(d,e);E.engageMagnifier(a,!0)}),J?d.css("cursor",'url("'+H.staticImages.zoomInCur+'"), auto'):(d.css("cursor","-webkit-zoom-in"),d.css("cursor","-moz-zoom-in"),d.css("cursor","zoom-in"))):E=new h(d,e):p.isEnabled&&c.logHoverZoomApplicability(f,p)}}var u,H,U,A,E,O,J=navigator.userAgent.match(/msie|trident/i);return function(a,c,e,f){u=this;H=a;U=c;p.refToModel=U;A=f;u.render=function(a,c,
d,e,f,l){O=d;E&&(E.destroy(),E=void 0)};u.update=function(a){};A.register("loadMagnifier",G);A.register("resize",G)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(k,f,a,e){function p(c,f,h){c=(c=h?h:a.getColorFromState(f.getState().hovered_variations,t))&&""!==c?c:t.defaultColor;G.dispatch("updateView",{type:"swatchHover",data:{color:c}});e.postCountMetric("swatchHover")}function c(c,f,k,w){c=(c=w?w:a.getColorFromState(f.getState().selected_variations,
t))&&""!==c?c:t.defaultColor;c===h.getCurrentItem().color?"function"===typeof k&&k():(G.dispatch("updateSelection",{type:"swatchClick",data:{color:c},onload:k}),e.postCountMetric("swatchClick"))}var w,t,h,G;return function(a,e,f,A){w=this;t=a;h=e;G=A;k.on("image-block-twister-swatch-hover",p);k.on("image-block-twister-swatch-click",c);w.render=function(a,c,e,f,d){};w.update=function(a){}}});"use strict";B.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",
function(k,f,a,e,p,c,w){function t(b,a,g,c){!d.autoplayVideo||P||d.useChromelessVideoPlayer?!e.isjQueryObjDefined(b.find(".a-button-selected"))&&(g=l.getCurrentItem(),!c||d.prioritizeVideos||"chromeless-video"===g.type&&d.autoplayVideo)&&(c=e.getVideoHash(g.color,0,d),-1!==c&&(a+=0,r.dispatch("updateModel",{data:{index:0,thumbnailIndex:a,variant:c.variant,type:d.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),a=b.find(".item").get(a),e.selectGivenThumbnail(f(a),b))):(e.selectGivenThumbnail(b.find("img:last"),
b),e.fadeToThumbnail(b.find("img").length-1,F,b))}function h(b){var a=l.getCurrentItem().color;if(d.useChildVideos&&!d.colorToVideo[a]){var g=function(){if(b){d.colorToVideo[a]=b;var g={type:"updatedData",data:l.getCurrentItem()};r.dispatch("updateView",g)}};d.lazyLoadExperienceDisabled?g():B.when(e.rankedImagesReadyEvent(d.colorToAsin[a].asin)).execute(function(){g()})}}function G(b){if(!d.useChildVideos)return e.lazyLoadingRequired(l.getCurrentItem(),l,d)?void 0:d.videos;if(d.colorToVideo[b])return d.colorToVideo[b];
var a=d.colorToAsin[b];if(a&&a.asin){var g={};g.params={asin:a.asin,productGroupID:d.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:d.useChromelessVideoPlayer,isUDP:d.isUDP};d.isDPXFeatureEnabled||(g.success=function(b){h(b)},p.load("/gp/product/features/apparel-main-image/videos.html",g));return d.colorToVideo&&d.colorToVideo[b]}}function u(){r.dispatch("selectThumbnail",e.useTabbedImmersiveView(d)?1:0)}function H(b,g,d,n){return a.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],
streamingUrls:g.url,swfUrl:d.swfUrl,foresterMetadataParams:d.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=e.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";c.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){u();c.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){u();c.postCountMetric("dppc_chromelessVideo:ERROR")},
ended:function(){v.seek(0)}},cuePoints:[{values:g.durationSeconds-1,type:"position",callback:function(a,g,c){a=c.durationSeconds-c.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});u();f(this).show().css("opacity",1)})}}]})}function y(a){if("chromeful-video"===a.type||"chromeless-video"===a.type){var c=e.getVideoHash(a.color,a.index,d);if(-1===c)return-1;if("chromeful-video"===
a.type){a=F.width()/F.height();var n=parseInt(c.videoWidth,10),r=parseInt(c.videoHeight,10);e.updateAspectRatio(a,n,r,m);v?(v.show(),e.loadMediaIntoAiry(v,c,g,d.tabletWeb)):v=d.tabletWeb?z:e.createAiryInstanceForChromeful(m,c,g,null,d.autoplayVideo,F,D,q);b:if(e.useTabbedImmersiveView(d)){if(1<e.getVideosCount(l.getCurrentItem().color,d)){if(e.isDefined(L)){D.show();break b}L=f('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(d.staticStrings.watchMoreVideos);D.find("#videoCaption").append(L);
k.declarative.create(L,"videoIngressClick",b)}e.playVideoInImmersiveView(d,l.getCurrentItem().color)&&(k.declarative.create(m,"videoIngressClick",b),m.children().css("z-index","-1"),m.css("display","inline-block"))}else D.find("#videoCaption").text(d.staticStrings.playVideo),D.show();c=v;d.autoplayVideo&&c&&!P&&(e.toggleVideoCaption(D),c.setVolume(0),c.show(),c.play(),P=!0)}else v?(v.show(),e.loadMediaIntoAiry(v,c,g,d.tabletWeb),v.play(),D.show()):(v=H(m,c,g))&&v.play()}}function A(a,g,n){var l=G(g);
g=a;e.isDefined(l)&&0<l.length&&d.alwaysIncludeVideo&&a===d.maxAlts&&(q.find(".item:last").remove(),a--);e.isDefined(l)&&(f.each(l,function(g,f){if(a<d.maxAlts){var n=d.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",r={type:n,index:g,thumbnailIndex:a,variant:f.variant};b={type:"video-ingress",index:g,thumbnailIndex:a,variant:f.variant};e.useTabbedImmersiveView(d)&&("chromeful-video"===n&&(S+=" videoBlockIngress  videoBlockDarkIngress",f.thumb=f.thumb.replace("_PKmb-play-button-overlay-thumb",
"")),d.altsOnLeft||(S+=" a-align-top"));e.createThumbnail(r,f.thumb,q,S);if(e.useTabbedImmersiveView(d)){E(q.find(".videoBlockIngress img"),d.videoIngressATFSlateThumbURL);var r=1<l.length?"multiple-videos":"one-video",h=1<l.length?l.length+" "+d.staticStrings.multipleVideos:d.staticStrings.singleVideo;h&&q.find(".videoBlockIngress").append(q.find("#videoCount_template").clone().text(h).attr("id","videoCount")).addClass(r)}I||(I=!0,c.postCountMetric("chromeless-video"===n?"dppc_chromelessVideoAvailable":
"dppc_chromefulVideoAvailable"));a++}if(e.useTabbedImmersiveView(d))return!1}),t(q,g,a,n));return a}function E(b,a){var g=b.attr("src");if(g&&a){b.attr("src",a);var c=new Image;c.onload=function(a){b.attr("src",g)};c.src=g}}function O(a){v&&v.pause();a.data=b;a.clickTimeStamp=a.$event.timeStamp;var g="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";r.dispatch("imageClick",a);c.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);c.postCountMetric(g)}function J(b){z=b.airy;
z.hide=function(){z.pause();k.$("#main-video-container").find(".vse-airy-container").hide()};z.show=function(){k.$("#main-video-container").find(".vse-airy-container").show();z.play()};z.getMediaSourceInfo=function(){return e.getMediaSourceInfo()}}var K,d,l,r,q,m,D,F,L,v,g,b,n,z,I=!1,P=!1,S="videoThumbnail";return function(a,t,M,z){K=this;d=a;l=t;r=z;g=d.airyConfig;d.colorToVideo={};d.colorToVideo[d.landingAsinColor]=d.colorToVideo[d.defaultColor]=d.videos;K.render=function(b,a,g,c,r,h){q=c;m=r.find("#main-video-container");
D=m.parent().find("#video-canvas-caption");F=f("#main-image-container");d.useChromelessVideoPlayer||m.addClass("chromeful-container");n=A(a,b,h);y(l.getCurrentItem());e.useTabbedImmersiveView(d)&&k.declarative("videoIngressClick",["click"],O);b=l.getCurrentItem().color;a=e.getVideoHash(b,0,d);-1!==a&&d.tabletWeb&&(b=e.getNilgiriServiceAjaxRequest(d,b,a),w.get(k,"#main-video-container",b,function(){k.$("#main-video-container").find(".vse-airy-container").hide()},function(){k.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));
return n};K.update=function(a){var g=a.data;"ingress"!==g.type&&v&&(v.hide(),m.parent().css("z-index",-1),D.hide());if("swatchHover"===a.type)g.color===l.getCurrentItem().color?y(l.getCurrentItem()):a.captured||e.lazyLoadingRequired(g,l,d)&&!e.lazyLoadOnHoverEnabled(d)&&y(l.getCurrentItem());else if("chromeful-video"===g.type||"chromeless-video"===g.type)"mouseenter"===a.type&&c.postCountMetric("dpcc_videoThumbHovered_"+(g.thumbnailIndex+1)+"_"+n),y(g),d.usePeekHover&&"click"!==a.type||(e.selectGivenThumbnail(a.$declarativeParent,
q),"click"===a.type&&e.useTabbedImmersiveView(d)&&(c.postCountMetric("dpcc_videoThumbClicked_"+(g.thumbnailIndex+1)+"_"+n),b.action="videoIngressClick",b.clickTimeStamp=a.$event.timeStamp,r.dispatch("videoIngressClick",b),c.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(d.isDPXFeatureEnabled)k.on("triggerVideoAjax",h);k.on("vseAiry",J)}});"use strict";B.when("A","a-modal","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric",
"imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(k,f,a,e,p,c,w,t,h){function G(b){return b.hiRes||b.large||b.main[b.main.length-1]}function u(){x.find("#ivTitle").click(function(){W.hide()})}function H(){N=Na?{type:"360-spin"}:da.getCurrentItem()}function B(){var b=x.find("#ivStage"),a=W.$container.find(".a-popover-wrapper"),g=a.find(".a-popover-inner"),a=a.height()-h.getDimension(g,"padding-top")-h.getDimension(g,"padding-bottom");x.css("height",a);var g=x.find("#ivTitle").outerHeight(!0),
c=x.find("#ivVariationSelection").outerHeight(!0),d=x.find("#ivMediaSelection").outerHeight(!0),e=x.find("#ivThumbs"),f=h.getDimension(e,"margin-top")+h.getDimension(e,"margin-bottom");e.css("height",a-g-c-d-f);x.find("#ivLargeImage").css("height",a);b.css("width",x.width()-h.getDimension(x,"padding-left")-h.getDimension(x,"padding-right")-x.find("#ivThumbColumn").width()-h.getDimension(b,"margin-left")-h.getDimension(b,"margin-right"))}function A(){x.find("#ivMediaSelect").change(function(){var b=
a(this).val();"all"===b?(x.find("#ivVideoList").hide(),x.find("#ivThumbs").show(),x.find(".ivThumbVideo").show(),"chromeful-video"===N.type&&x.find("#ivVideo_"+N.index).click()):"images"===b?(x.find("#ivVideoList").hide(),x.find("#ivThumbs").show(),x.find(".ivThumbVideo").hide(),"chromeful-video"===N.type&&(0===ca&&0===X?x.find("#iv360").click():0===ca?x.find("#ivHeroImage_0").click():x.find("#ivImage_0").click())):"videos"===b&&(x.find("#ivVideoList").show(),x.find("#ivThumbs").hide(),"chromeful-video"!==
N.type?x.find("#ivVideoList_0").click():x.find("#ivVideoList_"+N.index).click())})}function E(){var b=x.find("#ivStage").find("#ivLargeImage"),a=b.width(),g=b.height(),c=b.find(".fullscreen");c.removeAttr("style");var d=c.width(),e=c.height();0<c.length&&(c[0].naturalWidth&&(d=c[0].naturalWidth),c[0].naturalHeight&&(e=c[0].naturalHeight));b.css("cursor","auto");var d=0===d?1:d,e=0===e?1:e,f=Math.min(a/d,g/e),n=e*f,l=d*f;1>f?(Oa?b.css("cursor","url('"+C.staticImages.zoomIn+"'), auto"):(b.css("cursor",
"-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in")),za=!0):za=!1;d=Math.min(l,d);e=Math.min(n-20,e);c.css({"margin-top":(g-e)/2,"margin-left":(a-d)/2,height:e,width:d});b.css("visibility","visible");Aa=!1}function O(b){var a=x.find("#ivLargeImage");a.css("visibility","hidden");a.empty();h.animateStageIn(a);a.append(b);E()}function J(){Y&&Y.pause();x.find("#ivLarge360").css("display","none");x.find("#ivLargeVideo").css("display","none");x.find("#ivLargeImage").css("display",
"none");D()}function K(b){J();x.find("#ivLargeImage").css("display","block");var g;"hero-image"===b?e.isDefined(ia)&&(g=G(ia[N.index])):e.isDefined(ra)&&(g=G(ra[N.index]));if(e.isDefined(g)){x.find(".fullscreen").remove();var c=a("\x3cimg\x3e").attr("src",g).addClass("fullscreen"),d=x.find("#ivLargeImage");h.animateStageOut(d,function(){c.load(function(){O(c)});if(c[0].complete)O(c);else{d.empty();var b=(d.height()-104)/2,g=(d.width()-80)/2;a("\x3cimg\x3e").attr("src",C.staticImages.spinner).css({position:"relative",
top:b+"px",left:g+"px"}).appendTo(d)}})}}function d(){var b=parseInt(N.index,10)+1;b>=ma.length||x.find("#ivVideo_"+b).click()}function l(){var b;e.isDefined(ma)&&(b=ma[N.index]);if(e.isDefined(b)){J();var a=x.find("#ivLargeVideo").css("display","block");Y?(Y.isDetached()&&Y.attach(a[0]),e.loadMediaIntoAiry(Y,b,wa,C.tabletWeb),Y.show()):(Y=e.createAiryInstanceForChromeful(a,b,wa,"ImmersiveView"),wa.enableContinuousPlay&&Y.bind("ended",d));Y.play({isAsync:!0})}}function r(){H();var b;b="hero-image"===
N.type?x.find("#ivHeroImage_"+N.index):"image"===N.type?x.find("#ivImage_"+N.index):"chromeful-video"===N.type||"chromeless-video"===N.type?x.find("#ivVideo_"+N.index):"360-spin"===N.type?x.find("#iv360"):e.isDefined(ia)?x.find("#ivHeroImage_"+N.index):x.find("#ivImage_"+N.index);e.isjQueryObjDefined(b)||(b=x.find("#ivImage_0"));q(b)}function q(b){x.find(".ivThumb").removeClass("selected");b.addClass("selected");b.hasClass("ivThumbVideo")?(N.type="chromeful-video",N.index=b.attr("id").split("_")[1],
l()):b.hasClass("ivHeroImage")?(N.type="hero-image",N.index=b.attr("id").split("_")[1],K(N.type)):b.hasClass("iv360Image")?(N.type="360-spin",N.index=0,m()):(N.type="image",N.index=b.attr("id").split("_")[1],K(N.type))}function m(){J();x.find("#ivLarge360").css("display","block");b();var a=x.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});h.animateStageIn(a)},200);L();c.postCountMetric("dppc_click360");sa=Date.now()}function D(){0<sa&&(F("dppc_duration360",Date.now()-
sa),sa=0)}function F(b,a){y.ue&&y.ue.count(b,a)}function L(){if(0<pa){var b=x.find(".iv360Hint");b.removeClass("iv360HintFaded");b.animate({opacity:1},200)}}function v(b,g){if(pa<b.length){var c=a("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:ta+"px"});c.hide();g.append(c);c.get(0).onload=function(){g.closest(document.documentElement).length&&(pa++,1===pa&&(L(),0<sa&&F("dppc_loadTime360",Date.now()-sa)),0<Ga&&F("dppc_perSpriteloadTime360",Date.now()-Ga),x.find("#iv360Spinner").hide(),
c.show(),xa=5*Q.imageLocations[Math.floor(ya/Q.imageLocations[0].length)][ya%Q.imageLocations[0].length],v(b,g))};c.attr("src",b[pa].replace(/(\._SP)\d+(,)\d+/,"$1"+ua+"$2"+va));Ga=Date.now()}}function g(b){if(e.isDefined(Q.spriteWidthSizes)&&0<Q.spriteWidthSizes.length){var a=Q.spriteWidthSizes,g=a.length,c=a[0],d=a[g-1];if(b<=c)return c;if(b>d)return d;for(c=0;c<g;c++)if(b>a[c]&&b<=a[c+1])return a[c+1]}else return b}function b(){var b=x.find("#ivLarge360");b.children("#image-360-sprites").length||
(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",C.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Ha=!0,n())}function n(){if(e.isDefined(Q.spriteURLs)&&
e.isDefined(x)&&Ha&&!Ia){var b=x.find("#ivLarge360"),c=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});e.isDefined(Q.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",Q.staticImages.hint360).appendTo(c);a("\x3cdiv\x3e").css({"text-align":"center"}).text(C.staticStrings.dragToSpin).appendTo(c);c.appendTo(b);var c=Q.imageWidth,d=Q.imageHeight,f=b.parent().width(),n=b.parent().height(),
l=0,r=0;c/d>f/n?(ua=g(f),va=Math.round(d/c*ua),na=Math.ceil(f),ta=Math.ceil(va/ua*f),r=(n-ta)/2):(va=g(n),ua=Math.round(c/d*va),ta=Math.ceil(n),na=Math.ceil(ua/va*n),l=(f-na)/2);b.css({"margin-left":l,"margin-top":r,width:na+"px",height:ta+"px",overflow:"hidden",position:"relative"});b.children("#image-360-sprites").css("width",6*na+"px");v(Q.spriteURLs,x.find("#image-360-sprites"),0);c=x.find("#ivLarge360");c.bind("mousedown",S);c.bind("touchstart",z);c.bind("touchmove",I);c.bind("touchend",P);a(document).bind("mousemove",
T);a(document).bind("mouseup",R);e.isDefined(C.staticImages.grab)&&b.css("cursor","url('"+C.staticImages.grab+"'), auto");Ia=!0}}function z(b){Ba=!0;Ja=b.originalEvent.targetTouches[0].clientX}function I(b){Ba&&(M(b.originalEvent.targetTouches[0].clientX-Ja),Ja=b.originalEvent.targetTouches[0].clientX)}function P(b){Ba&&(Ba=!1)}function S(b){Ca=!0;Ka=b.originalEvent.clientX;e.isDefined(C.staticImages.grabbing)&&(b=x.find("#ivLarge360"),b.css("cursor","url('"+C.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor",
"url('"+C.staticImages.grabbing+"'), auto"));return!1}function T(b){Ca&&(M(b.originalEvent.clientX-Ka),Ka=b.originalEvent.clientX)}function R(b){Ca&&(Ca=!1,e.isDefined(C.staticImages.grab)&&(b=x.find("#ivLarge360"),b.css("cursor","url('"+C.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor","auto")))}function M(b){for(b=xa-=b/na*180;0>b;)b+=360;for(;360<b;)b-=360;xa=b;var a;b=360;for(var g=0;g<pa;g++)for(var c=0;c<Q.imageLocations[g].length;c++){var d=Math.abs(xa-5*Q.imageLocations[g][c]);
d<b&&(b=d,a=g*Q.imageLocations[0].length+c)}a!==ya&&(b=Math.floor(a/Q.imageLocations[0].length),b!==Math.floor(ya/Q.imageLocations[0].length)&&(e.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),g=x.find("#image-360-sprites").children(),La.drawImage(g[b],0,0)),b=x.find(".iv360Hint").not(".iv360HintFaded"),e.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));ya=a;b=a%Q.imageLocations[0].length*-1*na;a=-1*Math.floor(a/Q.imageLocations[0].length)*ta;g=x.find("#ivLarge360").children("#image-360-sprites");
g.css("-webkit-transform","translate3d("+b+"px, "+a+"px, 0)");g.css("transform","translate3d("+b+"px, "+a+"px, 0)")}function fa(){x.delegate(".ivThumb","click",function(){var b=a(this);q(b)});x.delegate(".ivThumbVideoListOuter","click",function(){x.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");N.type="chromeful-video";N.index=b.attr("id").split("_")[1];l()})}function Z(){Y&&!Y.isDetached()&&(wa.volume=Y.getVolume(),Y.detach(),!document.all||y.atob||document.addEventListener||
(Y=null));x.find("#ivLargeImage").empty();D()}function ha(b,a){return 0<a?a/2:Math.min(0,Math.max(a,b))}function ga(b){var g=qa.left-(b.pageX-Da[0])*Ea;k.capabilities.rtl&&(g=qa.left-(a(y).width()-b.pageX-Da[0])*Ea);b=qa.top-(b.pageY-Da[1])*Ea;g=ha(g,Fa.left);b=ha(b,Fa.top);x.find(".fullscreen").css({left:g,top:b})}function la(){x.delegate("#ivLargeImage","click",function(b){if(Aa)E();else if(za){x.find(".fullscreen").removeAttr("style");if(za){var a=x.find("#ivLargeImage"),g=a.find(".fullscreen");
Oa?a.css("cursor","url('"+C.staticImages.zoomOut+"'), auto"):(a.css("cursor","-webkit-zoom-out"),a.css("cursor","-moz-zoom-out"),a.css("cursor","zoom-out"));Aa=!0;var c=x.find("#ivLargeImage");Fa.left=c.width()-g.width();Fa.top=c.height()-g.height();var c=a.height()/2,d=a.width()/2;Da=[a.offset().left+d,a.offset().top+c];qa.top=c-g.height()/2;qa.left=d-g.width()/2;g.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(g.height()/a.height(),g.width()/a.width())}ga(b)}});x.delegate("#ivLargeImage",
"mousemove",function(b){Aa&&ga(b)})}function ja(b){if(e.isImmersiveViewEnabled(C,da.getCurrentItem().color)){Na=e.isDefined(b)&&"button-360-click"===b.action;w.isEnabled&&t.logImmersiveViewRequestServed(w);c.postCountMetric("dppc_immersiveViewOpened");if(e.isDefined(W))W.show();else{b=a("#auiImmersiveViewDiv");var g=a(y).height()-150,d=a(y).width()-75;W=f.create(b,{name:"immersiveView",activate:"onclick",width:d,height:g,popoverLabel:"ImmersiveView",hideHeader:!0});b.click()}if(Ma){x=a("#ivMain");
b=da.getCurrentItem().color;ra=C.colorImages[b];ia=C.heroImage[b];ma=C.useChildVideos?C.colorToVideo[b]:C.videos;ea=aa()&&C.spin360ColorEnabled[b];Q=aa()?C.spin360ColorData[b]:void 0;H();ka=X=oa=ca=0;e.isDefined(ia)&&(X=ia.length);e.isDefined(ra)&&(ca=ra.length);e.isDefined(ma)&&(oa=ma.length);ea&&(ka=1);h.populateTitle(x.find("#ivTitle"),45,C);h.populateVariationSelection(x.find("#ivVariationSelection"));b=x.find("#ivMediaSelect");0===ca+ka||0===oa?(b.parent().hide(),x.find("#ivThumbs").addClass("noMediaSelection")):
(b.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(C.staticStrings.allMedia+" ("+(X+ca+ka+oa)+")").appendTo(b),a("\x3coption/\x3e").attr("value","images").text(C.staticStrings.images+" ("+(X+ca+ka)+")").appendTo(b),a("\x3coption/\x3e").attr("value","videos").text(C.staticStrings.videos+" ("+oa+")").appendTo(b),b.parent().show(),b.val("all"));b=x.find("#ivThumbs");b.find(".ivRow").not(".placeholder").remove();for(var g=X+ca+oa+ka,n=d=0;d<g;)for(var l=b.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(b),
r=0;3>r&&d<g;r++,d++,n++)if(n<X){var q=ia[d].thumb,m=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+d).appendTo(l);m.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(q)+'") center no-repeat')}else if(n>=X&&n<ca+X)q=ra[d-X].thumb,m=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(d-X)).appendTo(l),m.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(q)+
'") center no-repeat');else if(n>=X+ca&&n<ca+X+ka)m=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(l),m.find(".ivThumbImage").css("background",'url("'+(e.isDefined(C.staticImages.icon360)?h.getResizedThumbnailURL(C.staticImages.icon360,!0):"")+'") center no-repeat');else if(q=ma[d-ca-X-ka],m=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(d-ca-X-ka)).appendTo(l),m.find(".ivThumbImage").css("background",
'url("'+q.thumbUrl+'") center no-repeat'),e.isDefined(q)){var M={position:"triggerTop"},z=x.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");z.find(".ivVideoPopoverTitle").text(q.title);z.find(".ivVideoPopoverDuration").text(q.durationTimestamp);M.inlineContent=z[0];k.declarative.create(m,"a-tooltip",M)}b=x.find("#ivVideoList");b.find(".ivThumbVideoListOuter").not(".placeholder").remove();g=b.find(".placeholder");for(d=0;d<oa;d++)n=ma[d],l=g.clone().removeClass("placeholder").appendTo(b),
l.attr("id","ivVideoList_"+d),l.find(".ivThumbImage").css("background",'url("'+n.thumbUrl+'") center no-repeat'),l.find(".ivThumbTitle").text(n.title),l.find(".ivThumbDuration").text(n.durationTimestamp);x.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=C.airyConfig;Ma=!1;Qa()}}}function Pa(b){var a=C.colorToAsin[b],g={},d=500;if(a&&a.asin){g.params={asin:a.asin};var f="360"+a.asin,l=Date.now();g.success=function(a){F("dppc_asyncRequestTime360",Date.now()-l);a&&e.isDefined(a.spin360.spin360Model)?(e.ajaxState(f,
"success"),C.spin360ColorData[b]=a.spin360.spin360Model,b===da.getCurrentItem().color&&(Q=C.spin360ColorData[b],n())):g.error()};g.error=function(){c.postCountMetric("dppc_asyncFailed360");F("dppc_asyncRequestTime360",Date.now()-l);d*=2;16E3>=d?setTimeout(function(){l=Date.now();p.load("/gp/product/features/apparel-main-image/360.html",g)},d):e.ajaxState(f,"fail")};e.ajaxState(f)&&"fail"!==e.ajaxState(f)||(p.load("/gp/product/features/apparel-main-image/360.html",g),e.ajaxState(f,"sent"))}}function aa(){return e.isDefined(C.spin360ConfigEnabled)&&
C.spin360ConfigEnabled}var ba,C,da,V,W,x,ia,ra,ma,X,ca,oa,ka,N,Y,wa,Q,ea,na,ta,va,ua,Ka,Ja,Na=!1,Ha=!1,Ia=!1,xa=0,ya=0,sa=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Oa=navigator.userAgent.match(/msie|trident/i),Ma=!0,Aa=!1,za=!1,Fa={},qa={},Ea,Da,Qa=k.once(function(){A();fa();la();k.on("a:popover:afterUpdatePosition:immersiveView",B);k.on("a:popover:afterShow:immersiveView",r);k.on("a:popover:afterHide:immersiveView",Z);u()});return function(b,g,d,f){ba=this;C=b;da=g;w.refToModel=da;V=f;aa()&&(C.spin360ColorData[C.landingAsinColor]=
C.spin360ColorData[C.defaultColor],C.spin360ColorEnabled[C.landingAsinColor]=C.spin360ColorEnabled[C.defaultColor]);e.isDefined(C.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",h.addStyleCodeToURL(C.staticImages.icon360,"_FMpng_RI_"));ba.render=function(b,a,g,d,f,n){Ma=!0;aa()&&C.spin360ColorEnabled[b]&&!e.isDefined(C.spin360ColorData[b])&&(C.spin360ColorData[b]={},Pa(b));e.isImmersiveViewEnabled(C,da.getCurrentItem().color)&&aa()&&C.spin360ColorEnabled[b]&&
(a===C.maxAlts&&(b=d.find(".item.imageThumbnail"),g=d.find(".item.videoThumbnail"),e.isDefined(g)&&1<g.length?g.last().remove():b.last().remove(),a--),b=d.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),k.declarative.create(b,"button-360-click"),d.append(b),a++,c.postCountMetric("dppc_display360"));return a};ba.update=function(b){};V.register("imageClick",ja);V.register("button360Click",ja)}});"use strict";B.when("A","a-modal","jQuery",
"imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(k,f,a,e,p,c,w,t){function h(){var c=A.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),d=c.find(".a-popover-inner"),c=c.height()-t.getDimension(d,"padding-top")-t.getDimension(d,"padding-bottom");a("#iv-tab-view-container").css("height",c);J=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==
a(this).css("display")}).length;1<J?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),d=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),c-=d):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",c);k.trigger("dp:image-block:immersive-view:resize")}function G(){k.trigger("dp:image-block:immersive-view:reset")}function u(l){if(e.isImmersiveViewEnabled(B,A.getCurrentItem().color)){c.isEnabled&&w.logImmersiveViewRequestServed(c);
p.postCountMetric("dppc_immersiveViewOpened");e.isDefined(l)&&("button-360-click"===l.action?a("#iv360TabHeading").click():"videoIngressClick"===l.action?(K=l.clickTimeStamp,a("#ivVideosTabHeading").click()):"showroomIngressClick"===l.action?(K=l.clickTimeStamp,a("#ivShowroomTabHeading").click()):a("#ivImagesTabHeading").click());var h=A.getImmersiveViewModalInstance();if(e.isDefined(h))h.show();else{l=a("#auiImmersiveViewDiv");var h=Math.min(Math.max(a(y).height()-150,540),1080),m=Math.min(Math.max(a(y).width()-
75,990),1980),h=f.create(l,{name:"immersiveView",activate:"onclick",width:m,height:h,popoverLabel:"ImmersiveView",hideHeader:!0});A.setImmersiveViewModalInstance(h);l.click()}O&&(O=!1,d(),k.trigger("dp:image-block:immersive-view:init"))}}var H,B,A,E,O=!0,J=0,K,d=k.once(function(){k.on("a:popover:afterUpdatePosition:immersiveView",h);k.on("a:popover:afterShow:immersiveView",h);k.on("a:popover:afterHide:immersiveView",G)}),l=k.once(function(){var c=a("#iv-tab-view-container ul.iv-tab-views li");c.bind("click",
function(d){var f=c.filter(".iv-active");f.attr("id")!==a(this).attr("id")&&k.trigger("dp:ivTabs:"+f.find("a").attr("data-iv-tab-view")+":deselect",d);c.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();f=a(this).find("a").attr("data-iv-tab-view");a("#"+f).show();"ivVideosTab"===f&&(d.clickTimeStamp=K||d.timeStamp);k.trigger("dp:ivTabs:"+f+":select",d);p.postCountMetric("dppc_"+f);return!1})});return function(a,d,f,h){H=this;B=a;A=d;c.refToModel=
A;E=h;H.render=function(a,c,d,g,b,f){p.postCountMetric("dpcc_altThumbs_"+c);O=!0};H.update=function(a){};H.getTitle=function(){};H.getVariationSelectionInfo=function(){};l();E.register("imageClick",u);E.register("button360Click",u);e.useTabbedImmersiveView(B)&&(E.register("videoIngressClick",u),E.register("showroomIngressClick",u))}});"use strict";B.when("A").register("ImageBlockLoader",function(k){return{load:function(f,a){a=a||{};a.timeout=a.timeout||4E3;k.ajax(f,a)}}});"use strict";B.when("A",
"jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(k,f,a,e,p,c,w,t){function h(a){return null!==a&&"undefined"!==typeof a}function G(a){var b=0;f.each(a,function(a,g){var c=parseInt(g[1],10);c>b&&(b=c)});return b}function u(a){var b=0;f.each(a,function(a,g){var c=parseInt(g[0],10);c>b&&(b=c)});return b}function H(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=G(a);0<a&&(b=Math.min(b,a));return b}
function B(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=u(a);0<a&&(b=Math.min(b,a));return b}function A(a){var b;f.each(a,function(a,g){h(b)||(b=g[1]/g[0])});return b||1}function E(a,b,c){b.fadeTo(500,0,function(){J(a,c);b.fadeTo(500,1)})}function O(a){a&&a.toggle()}function J(a,b){var c=b.find("img");h(c[a])&&f(c[a]).click()}function K(a,b){v[a]=b?b:v[a];return v[a]}function d(a,b,c){c=c||L;c=c.colorImages;if(1>c.length||!h(c[a])||!h(b))return-1;var d=-1;f.each(c[a],function(a,c){c.variant===
b&&(d=a)});return d}function l(a,b,c){c=c||L;c=c.colorImages;return!(h(c)&&h(c[a])&&h(c[a][b])&&h(c[a][b].main))||1>f.map(c[a][b].main,function(b,a){return a}).length?-1:c[a][b]}function r(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function q(a,b){var c;if(c=a.useIV)c=a.colorImages&&a.colorImages[b]&&0<a.colorImages[b].length?!0:!1;w.isEnabled&&(w.IVApplicaple=c,t.logImmersiveViewApplicability(f,w));return c}var m,D,F,L=f.extend(!0,
{},p,c),v={};return{isDefined:h,isDefinedAndEmpty:function(a){return h(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return h(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return h(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:A,getMaxHeightOfMainImage:B,getMaxWidthOfMainImage:H,getMaxDimensionsOfMainImage:function(a,b,c){if(c.acEnabled)return[b.height(),
b.width()];var d=B(a,b,c);b=H(a,b,c);a=A(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(h(d)){a=d.offsetWidth/b;a=Math.min(a,c);var f;b=L.mainImageHeightPartitions;c=L.mainImageMaxSizes;if(h(c)&&h(b)){for(var e=0,l=y.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)l>b[d]&&(e=d+1);c.length>=e&&(f=c[e])}h(f)&&(a=Math.min(f[1],a))}return a},getColorFromState:function(a,b){if(a){b=b||L;
var c="";f.each(b.visualDimensions,function(b,d){a[d]&&(c+=" "+a[d])});return c&&c.substring(1)}},createThumbnail:function(a,b,c,d){var f=c.find(".template").clone().removeClass("template").addClass("item"),e=document.createElement("img");e.src=b;f.find(".placeHolder").replaceWith(e);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&f.addClass("heroImageThumbnail");h(d)&&f.addClass(d);k.declarative.create(f,"thumb-action",a);c.append(f)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");
b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(c,b,d,l,h,r,k,q){var t=f.extend({},d.foresterMetadataParams);null!==l&&(t.method+="."+l);var M=[];b.disabledViewIds&&(M=b.disabledViewIds);return a.embed({parentElement:c[0],streamingUrls:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,swfUrl:d.swfUrl,foresterMetadataParams:t,
backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl},videoAds:d.videoAds,bindings:{play:function(){"ImmersiveView"===l?m||(m=!0,e.postCountMetric("dppc_chromefulVideoPlayedIV")):D||(D=!0,e.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:b.durationSeconds-1,type:"position",callback:function(b,a,c){h&&(E(0,r,q),O(k))}}],disabledViewIds:M})},loadMediaIntoAiry:function(a,b,c,d){a&&a.getMediaSourceInfo()!==b.url&&
(d?(F={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(F)):a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}))},showUnavailable:function(a){a&&(f("#imageBlock .unvailableVariation").html(a),f("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){f("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:E,
toggleVideoCaption:O,selectThumbnail:J,spinner:function(a,b){var c=f("#imageBlock .a-spinner").parent();0===c.length&&(c=f("\x3cdiv\x3e\x3c/div\x3e").append(f("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),a.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px",
"border-radius":"100%"}));b?c.show():c.hide();return c},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:K,getIndexForVariant:d,getImageHash:l,lazyLoadingRequired:function(a,b,c){b=Math.max(d(a.color,b.getCurrentItem().variant,c),0);b=-1!==l(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==K(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:r,
repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();r(c,16,9,b)},d||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!h(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return h(a)&&h(a[b])&&h(a[b].url)?a[b]:-1},isImmersiveViewEnabled:q,playVideoInImmersiveView:function(a,b){return q(a,b)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},
getMediaSourceInfo:function(){return h(F)?F.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,c){b=a.colorToAsin[b]&&a.colorToAsin[b].asin;b=h(b)?b:a.mediaAsin;return{pageContext:{page:"DetailPageTablet",placement:"ImageBlock",marketplaceID:c.marketPlaceID,locale:c.languageCode,requestId:a.requestId,product:{contentID:b,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:"ASIN",imageURL:c.slateUrl,videoURL:c.url}},configuration:{id:"div-light-player",type:"lightplayer",
binder:"lightplayer",assets:["VSECommonComponentAssets","Brila"],features:{features:{placementcontext:"vse_ib_tablet_web"}}}}}}});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(k,f,a,e){function p(c,d,h,m){if(!a.isjQueryObjDefined(c.find(".a-button-selected"))){var k=E.getCurrentItem();if(!m||"chromeless-video"!==k.type||!A.autoplayVideo){m=0;if("hero-image"===k.type){m=w(k.color,k.variant);if(-1===m)return;m=-1!==m?m:0}var t=
d+m;t>=h&&(m=0,t=d);d=e.getHeroImageHash(A,k.color,m);-1!==d&&(B.dispatch("updateModel",{data:{index:m,thumbnailIndex:t,variant:d.variant,type:"hero-image"}}),d=c.find(".item").get(t),a.selectGivenThumbnail(f(d),c))}}}function c(c,d,e){if("hero-video"===E.getCurrentItem().type)return c;d=A.heroImage&&A.heroImage[d];var h=c;a.isDefined(d)&&(f.each(d,function(d,f){c<A.maxAlts&&(a.createThumbnail({type:"hero-image",index:d,thumbnailIndex:c,variant:f.variant},f.thumb,J,"imageThumbnail"),c++)}),p(J,h,
c,e));return c}function w(c,d){var e=A.heroImage;if(1>e.length||!a.isDefined(e[c])||!a.isDefined(d))return-1;var h=-1;f.each(e[c],function(a,c){c.variant===d&&(h=a)});return h}function t(){if(K.length&&A.repositionHeroImage){var c=e.getHeroDimParams(A,E.getCurrentItem()),d;a.isDefined(c)&&(d=a.isDefined(c.xPos)?c.xPos+"px "+c.yPos+"px ":"center "+c.yPos+"px ",K.css({"background-position":d,"background-size":c.width+"px "+c.height+"px ","max-width":c.width+"px ","min-height":c.height+"px ",filter:"",
"-ms-filter":""}))}}function h(c,d,f,h){if(K.length&&c&&d){if("function"===typeof f||h){var k=new Image;k.onload=h?function(){K.css("background-image",'url("'+c+'")')}:f;k.src=c}f=d[1];var k=d[0],t;h||K.css({"background-image":'url("'+c+'")'});A.repositionHeroImage&&(d=e.getHeroDimParams(A,E.getCurrentItem(),d),a.isDefined(d)&&(f=d.width,k=d.height,t=a.isDefined(d.xPos)?d.xPos+"px "+d.yPos+"px ":"center "+d.yPos+"px "));K.css({"background-position":t,"background-size":f+"px "+k+"px ","max-width":f+
"px ","min-height":k+"px ",filter:"","-ms-filter":""})}}function G(a,c,d,k){a=e.getHeroImageHash(A,a,c);if(-1===a)return-1;c=f.map(a.main,function(a,c){return c})[0];h(c,a.main[c],d,k)}function u(a,c,d){if("hero-image"!==a.type)return-1;var f=w(a.color,E.getCurrentItem().variant),f=-1!==f?f:0;if(-1===e.getHeroImageHash(A,a.color,f))return-1;var h=E.getCurrentItem();a.thumbnailIndex=h.thumbnailIndex;a.type=h.type;a.variant=h.variant;a.index=f;H(a,c,d)}function H(a,c,f){var h=e.getHeroImageHash(A,a.color,
a.index),t;t=a&&d&&k.equals(a,d)?!0:!1;d||(d=a);if(!t&&a||c)G(a.color,a.index,c,f),d=a;K.removeClass("hide-background");k.trigger("dp:image-block:update",h)}var y,A,E,B,J,K,d={};return function(d,e,h,k){y=this;A=d;E=e;B=k;A.heroImage[A.landingAsinColor]=A.heroImage[A.defaultColor];y.render=function(a,d,e,h,g,b,l){J=h;K=f("#heroImage");a=c(d,a,b);u(E.getCurrentItem(),l,b);return a};y.update=function(c){var d=c.data;"ingress"!==d.type&&K.addClass("hide-background");"swatchHover"===c.type?c.captured||
(d.type=E.getCurrentItem().type,-1!==u(d)&&(c.captured=!0)):"hero-image"===d.type&&(H(d),"click"!==c.type&&A.usePeekHover||a.selectGivenThumbnail(c.$declarativeParent,J))};B.register("resize",t)}});"use strict";B.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",function(k,f,a){var e,p,c,w;return function(f,h,G,u){e=this;p=f;c=u;e.render=function(c,f,h,t,G,u,y){w=t;e=this;h=p.maxAlts;t=f;G=p.colorImages[c]?p.colorImages[c].length:0;G+=a.getVideosCount(c,p);c=p.heroImage[c];
u=0;c&&(u=c.length);c=G+u;c>h&&(h=c-h,c=w.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),h+="+",t={type:"ingress",index:0,thumbnailIndex:f,variant:""},c.find("#altIngressText").append(h),k.declarative.create(c,"thumb-action",t),w.append(c),t=f++);return t};e.update=function(a){"ingress"===a.data.type&&"click"===a.type&&c.dispatch("imageClick",a)}}});"use strict";B.when("imageBlockUtils").register("ImageBlockState",function(k){return function(f,
a,e){this.getImageHash=function(a){var c=e.getCurrentItem();a=k.getIndexForVariant(c.color,a||"MAIN",f);return k.getImageHash(c.color,a,f)};this.onImageUpdateForTwister=function(f){a.register("updateSelection",function(a){"swatchClick"===a.type&&"function"===typeof f&&f()})}}});"use strict";B.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(k,f){function a(a,f){var e;if(f.repositionHeroImage){e=a[1];var h=a[0];if(768>=(y.innerHeight||document.documentElement.clientHeight||
document.body.clientHeight))e*=.7,h*=.7;else{var k=((y.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,k=Math.max(Math.min(k,1),0);e*=.7+.3*k;h*=.7+.3*k}e=[e,h]}return e}function e(a,e,k){var h;if(k.repositionHeroImage){var p=y.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;k=k.heroFocalPoint;if(f.isDefined(k)){h=Math.max((p-Math.min(1500,a))/2,0);var u=Math.max((p-a)/2,0);h-=u;p=Math.max(Math.min(p,1500),1024);h=h+(p-420-23)/2-a/
e[1]*k}}return h}function p(a,e,t){a=a.heroImage;return!(f.isDefined(a)&&f.isDefined(a[e])&&f.isDefined(a[e][t])&&f.isDefined(a[e][t].main))||1>k.map(a[e][t].main,function(a,c){return c}).length?-1:a[e][t]}return{getHeroImageHash:p,getHeroDimParams:function(c,w,t){if(c.repositionHeroImage){if(!f.isDefined(t)){t=p(c,w.color,w.index);if(-1===t)return;w=k.map(t.main,function(a,c){return c})[0];t=t.main[w]}w=a(t,c);c=e(w[0],t,c);return{height:w[1],width:w[0],xPos:c,yPos:75}}}}});"use strict";B.when("A",
"jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(k,f,a){function e(c,f){var e=k.copy(c);if(a.isDefined(c)&&c.length>f){try{for(var h=-1,p=0;p<c.length;p++){var u=c.charAt(p);if(" "===u||"."===u||"?"===u||";"===u||","===u||":"===u)h=p;if(p===f-4){e=c.substring(0,-1===h?p:h);break}}}catch(y){e=c.substring(0,f-3)}e+="..."}return e}function p(a,f){var e=a.lastIndexOf(".");return a="_"===a.charAt(e-1)?a.substring(0,e-1)+f+a.substring(e):a.substring(0,e)+"."+f+a.substring(e)}
return{getDimension:function(a,f){var e=parseInt(a.css(f),10);return isNaN(e)?0:e},attachTabSelectHandler:function(a,f){k.on("dp:ivTabs:"+a+":select",f)},attachTabDeselectHandler:function(a,f){k.on("dp:ivTabs:"+a+":deselect",f)},attachImmersiveViewResizeHandler:function(a){k.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){k.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){k.on("a:popover:afterHide:immersiveView",
a)},hideTabHeading:function(a){f("#"+a).hide()},unhideTabHeading:function(a){f("#"+a).show()},addStyleCodeToURL:p,getResizedThumbnailURL:function(a,f){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var e="_AA50_";f&&(e+="FMpng_RI_");return p(a,e)},populateVariationSelection:function(c){if(a.isDefined(y.DetailPage)&&a.isDefined(y.DetailPage.StateController)){c.empty();
var e=y.DetailPage.StateController.getState(),k=e.variation_label_order,h;for(h in k)if(k.hasOwnProperty(h)){var p=k[h],u=e.selected_variations[p],p=e.variation_display_labels[p];u&&f("\x3cdiv/\x3e").addClass("ivVariations").text(p+":"+u).appendTo(c)}}},populateTitle:function(a,f,k){a.html(k.title);a.attr("title",a.text());a.html(e(k.title,f))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,f){a.animate({opacity:.4},100,f)},logError:function(a,f,e,h){y.ueLogError&&
y.ueLogError(h,{logLevel:a,attribution:f,message:e})}}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(k,f,a,e,p){function c(){p.populateTitle(q.find("#ivTitle"),160,l)}function w(){var b=r.getCurrentItem().color;D=l.colorImages[b];m=l.heroImage[b];F=L=0;a.isDefined(m)&&(F=m.length);a.isDefined(D)&&(L=D.length)}function t(a){return a.hiRes||a.large||a.main[a.main.length-1]}function h(){var a=q.find("#ivStage").find("#ivLargeImage"),
b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var f=d.width(),e=d.height();0<d.length&&(d[0].naturalWidth&&(f=d[0].naturalWidth),d[0].naturalHeight&&(e=d[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,e=0===e?1:e,h=Math.min(b/f,c/e),k=e*h,m=f*h;1>h?(g?a.css("cursor","url('"+l.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),z=!0):z=!1;f=Math.min(m,f);e=Math.min(k-20,e);d.css({"margin-top":(c-
e)/2,"margin-left":(b-f)/2,height:e,width:f});a.css("visibility","visible");n=!1}function y(a){var b=q.find("#ivLargeImage");b.css("visibility","hidden");b.empty();p.animateStageIn(b);b.append(a);h()}function u(b){q.find("#ivLargeImage").css("display","none");q.find("#ivLargeImage").css("display","block");var c;"hero-image"===b?a.isDefined(m)&&(c=t(m[v.index])):a.isDefined(D)&&(c=t(D[v.index]));if(a.isDefined(c)){q.find(".fullscreen").remove();var d=f("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),
e=q.find("#ivLargeImage");p.animateStageOut(e,function(){d.load(function(){y(d)});if(d[0].complete)y(d);else{e.empty();var a=(e.height()-104)/2,b=(e.width()-80)/2;f("\x3cimg\x3e").attr("src",l.staticImages.spinner).css({position:"relative",top:a+"px",left:b+"px"}).appendTo(e)}})}}function B(a){q.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?v.type="hero-image":v.type="image";v.index=a.attr("id").split("_")[1];u(v.type);e.postCountMetric("dpcc_iv_thumbCLick_"+
(parseInt(v.index,10)+1)+"_"+(F+L))}function U(){q.delegate(".ivThumb","click",function(){var a=f(this);B(a)})}function A(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function E(a){var b=P.top-(a.pageY-T[1])*S;a=A(P.left-(a.pageX-T[0])*S,I.left);b=A(b,I.top);q.find(".fullscreen").css({left:a,top:b})}function O(){q.delegate("#ivLargeImage","click",function(a){if(n)h();else if(z){q.find(".fullscreen").removeAttr("style");if(z){var b=q.find("#ivLargeImage"),c=b.find(".fullscreen");g?b.css("cursor",
"url('"+l.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));n=!0;var d=q.find("#ivLargeImage");I.left=d.width()-c.width();I.top=d.height()-c.height();var d=b.height()/2,f=b.width()/2;T=[b.offset().left+f,b.offset().top+d];P.top=d-c.height()/2;P.left=f-c.width()/2;c.css({position:"relative",left:P.left,top:P.top});S=Math.max(c.height()/b.height(),c.width()/b.width())}E(a);e.postCountMetric("dpcc_iv_largeImageCLick")}});
q.delegate("#ivLargeImage","mousemove",function(a){n&&E(a)})}function J(){q.find("#ivLargeImage").empty()}function K(d){if(b){q=f("#ivMain");w();v=r.getCurrentItem();c();p.populateVariationSelection(q.find("#ivVariationSelection"));d=q.find("#ivThumbs");d.find(".ivRow").not(".placeholder").remove();for(var e=F+L,g=0,h=0;g<e;)for(var k=d.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(d),l=0;4>l&&g<e;l++,g++,h++)if(h<F){var n=m[g].thumb,t=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+g).appendTo(k);t.find(".ivThumbImage").css("background",'url("'+p.getResizedThumbnailURL(n)+'") center no-repeat')}else h>=F&&h<L+F&&(n=D[g-F].thumb,t=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(g-F)).appendTo(k),t.find(".ivThumbImage").css("background",'url("'+p.getResizedThumbnailURL(n)+'") center no-repeat'));R();b=!1}else c();d=f("#ivImagesTab").height();q.css("height",d);e=q.find("#ivTitle").outerHeight(!0);g=q.find("#ivVariationSelection").outerHeight(!0);
h=q.find("#ivThumbs");k=p.getDimension(h,"margin-top")+p.getDimension(h,"margin-bottom");h.css("height",d-e-g-k);q.find("#ivLargeImage").css("height",d);d=q.find("#ivStage");e=q[0]&&q[0].getBoundingClientRect&&Math.floor(q[0].getBoundingClientRect().width)||q.width();d.css("width",e-p.getDimension(q,"padding-left")-p.getDimension(q,"padding-right")-q.find("#ivThumbColumn").width()-p.getDimension(d,"margin-left")-p.getDimension(d,"margin-right"));v=r.getCurrentItem();d="hero-image"===v.type?q.find("#ivHeroImage_"+
v.index):"image"===v.type?q.find("#ivImage_"+v.index):a.isDefined(m)?q.find("#ivHeroImage_"+v.index):q.find("#ivImage_"+v.index);a.isjQueryObjDefined(d)||(d=q.find("#ivImage_0"));B(d)}var d,l,r,q,m,D,F,L,v,g=navigator.userAgent.match(/msie|trident/i),b=!0,n=!1,z=!1,I={},P={},S,T,b=!0,R=k.once(function(){U();O();p.attachImmersiveViewResizeHandler(K);p.attachTabDeselectHandler("ivImagesTab",J)});return function(a,c,e,g){d=this;l=a;r=c;d.render=function(a,c,d,e,g,h){b=!0;w();0===F+L?p.hideTabHeading("ivImagesTabHeading"):
p.unhideTabHeading("ivImagesTabHeading");1===F+L?f("#ivThumbs").hide():f("#ivThumbs").show()};d.update=function(a){};p.attachTabSelectHandler("ivImagesTab",K)}});"use strict";B.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(k,f,a,e,p,c,w){function t(){l.delegate(".ivThumb","click",function(){var a=f(this);l.find(".ivThumb").removeClass("selected");a.addClass("selected");
a.hasClass("ivThumbVideo")&&(r.type="chromeful-video",r.index=a.attr("id").split("_")[1])})}function h(){var a=f("#ivVideosTab").height();l.css("height",a);var c=l.find(".vse-video-block");m=a-p.getDimension(l,"padding-top")-p.getDimension(l,"padding-bottom");c.css({"max-height":a,overflow:"hidden"});if(b)l.css({"max-width":Math.floor(1.77*m)});else{var a=l.find(".vse-airy-container"),c=l.find(".vse-ib-metadata"),d=Math.floor(m-p.getDimension(c,"height")),e=Math.floor(1.77*d);a.css({"max-height":d,
"max-width":e});c.css("max-width",e);n&&(a=l.find(".vse-vertical-scroll"),c=p.getDimension(a,"margin-top")+p.getDimension(a,"margin-bottom"),a.css("max-height",m-c))}}function B(){u();q&&q.pause();z=!1;v=!0;L=null}function u(){z=!1;q&&q.pause()}function H(a){L=a.clickTimeStamp;g&&(w.get(k,"#ivVideoBlock",d,T,R),l=f("#ivVideoBlock"),K.getCurrentItem(),r=K.getCurrentItem(),I());h();z=!0;g=!1;E()}function U(a){g&&(l=f("#ivVideoBlock"),K.getCurrentItem(),r=K.getCurrentItem(),I());z&&E();h()}function A(a){q=
a.airy;z&&q.play({isAsync:!0})}function E(){if(q&&(q.play({isAsync:!0,eventTimestamp:L||(new Date).getTime()}),e.postCountMetric("dpcc_vse_videoBlock_video_played"),v)){var a=y.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,e.postTimeMetric("dpcc_vse_vitff",a),v=!1)}}var O,J,K,d,l,r,q,m,D,F,L,v=!0,g=!0,b=!1,n=!1,z=!1,I=k.once(function(){t();p.attachImmersiveViewResizeHandler(U);p.attachTabDeselectHandler("ivVideosTab",u);p.attachImmersiveViewResetHandler(B)}),P=function(c,
d,g){f("#ivVideoBlockSpinner").addClass("aok-hidden");e.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+d.placement);c=K.getCurrentItem().color;c=a.getVideoHash(c,0,J);q||(q=a.createAiryInstanceForChromeful(f("#ivVideoBlock"),c,J.airyConfig,"ImmersiveView"));b=!0;f("#ivVideoBlock").css({"max-width":1.77*m,margin:"0 auto"});z&&b&&q.play({isAsync:!0})},S=function(a,b,c){g||w.get(a,"#ivVideoBlock",d,T,R);f("#ivVideoBlockSpinner").addClass("aok-hidden")},T=function(a,b,c){n=!0;h();z&&E()},R=function(a,
b,c){e.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(b,f,e,h){O=this;J=b;K=f;O.render=function(b,f,e,h,l,n){b=K.getCurrentItem().color;f=a.getVideoHash(b,0,J);D=J.colorToAsin[b]&&J.colorToAsin[b].asin;D=a.isDefined(D)?D:J.mediaAsin;F=null!==J.vseVideoDataSourceTreatment&&"T1"===J.vseVideoDataSourceTreatment?"ASIN":"physicalID";g=!0;-1===f?p.hideTabHeading("ivVideosTabHeading"):(p.unhideTabHeading("ivVideosTabHeading"),d={page:"DetailPage",
placement:"ImageBlock",device:"Desktop",marketplaceID:f.marketPlaceID,locale:f.languageCode,product:{contentID:D,contentIDType:"ASIN"},video:{contentID:f.mediaObjectId,contentIDType:F,videoURL:f.url,imageURL:f.slateUrl},requestId:J.dpRequestId,metadata:{ProductTitle:J.title}},c.get(k,"#ivVideoBlock",d,S,P))};O.update=function(a){};p.attachTabSelectHandler("ivVideosTab",H);k.on("vseAiry",A)}});"use strict";B.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",
function(k,f,a,e,p,c,w){function t(){var a=f("#iv360Tab").height();z.css("height",a);var b=z.find("#ivTitle360").outerHeight(!0),c=z.find("#ivVariationSelection360").outerHeight(!0),d=z.find("#ivThumbs360"),e=w.getDimension(d,"margin-top")+w.getDimension(d,"margin-bottom");d.css("height",a-b-c-e);a=z.find("#ivStage360");b=z[0]&&z[0].getBoundingClientRect&&Math.floor(z[0].getBoundingClientRect().width)||z.width();a.css("width",b-w.getDimension(z,"padding-left")-w.getDimension(z,"padding-right")-z.find("#ivThumbColumn360").width()-
w.getDimension(a,"margin-left")-w.getDimension(a,"margin-right"))}function h(){U();var a=z.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});w.animateStageIn(a)},200);y()}function y(){if(0<C){var a=z.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function u(a,d){if(C<a.length){var e=f("\x3cimg /\x3e").css({display:"block",width:6*P+"px",height:S+"px"});e.hide();d.append(e);e.get(0).onload=function(){d.closest(document.documentElement).length&&
(C++,1===C&&(y(),0<ja&&(p.time("dppc_loadTime360",Date.now()-ja,b.mediaAsin),c.postTimeMetric("dppc_loadTime360",Date.now()-ja))),0<ea&&(p.time("dppc_perSpriteloadTime360",Date.now()-ea,b.mediaAsin),c.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ea)),z.find("#iv360Spinner").hide(),e.show(),ga=5*I.imageLocations[Math.floor(la/I.imageLocations[0].length)][la%I.imageLocations[0].length],u(a,d))};e.attr("src",a[C].replace(/(\._SP)\d+(,)\d+/,"$1"+R+"$2"+T));ea=Date.now()}}function B(b){if(a.isDefined(I.spriteWidthSizes)&&
0<I.spriteWidthSizes.length){var c=I.spriteWidthSizes,d=c.length,f=c[0],e=c[d-1];if(b<=f)return f;if(b>e)return e;for(f=0;f<d;f++)if(b>c[f]&&b<=c[f+1])return c[f+1]}else return b}function U(){var a=z.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none",
"-mos-user-select":"none"}),f("\x3cimg\x3e").attr("src",b.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Z=!0,A())}function A(){if(a.isDefined(I.spriteURLs)&&a.isDefined(z)&&Z&&!ha){var c=z.find("#ivLarge360"),e=f("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});a.isDefined(I.staticImages.hint360)&&f("\x3cimg\x3e").css({"margin-left":"auto",
"margin-right":"auto",display:"block"}).attr("src",I.staticImages.hint360).appendTo(e);f("\x3cdiv\x3e").css({"text-align":"center"}).text(b.staticStrings.dragToSpin).appendTo(e);e.appendTo(c);var e=I.imageWidth,g=I.imageHeight,h=c.parent().width(),k=c.parent().height(),n=0,m=0;e/g>h/k?(R=B(h),T=Math.round(g/e*R),P=Math.ceil(h),S=Math.ceil(T/R*h),m=(k-S)/2):(T=B(k),R=Math.round(e/g*T),S=Math.ceil(k),P=Math.ceil(R/T*k),n=(h-P)/2);c.css({"margin-left":n,"margin-top":m,width:P+"px",height:S+"px",overflow:"hidden",
position:"relative"});c.children("#image-360-sprites").css("width",6*P+"px");u(I.spriteURLs,z.find("#image-360-sprites"),0);e=z.find("#ivLarge360");e.bind("mousedown",K);e.bind("touchstart",E);e.bind("touchmove",O);e.bind("touchend",J);f(document).bind("mousemove",d);f(document).bind("mouseup",l);a.isDefined(b.staticImages.grab)&&c.css("cursor","url('"+b.staticImages.grab+"'), auto");ha=!0}}function E(a){ba=!0;fa=a.originalEvent.targetTouches[0].clientX}function O(a){ba&&(r(a.originalEvent.targetTouches[0].clientX-
fa),fa=a.originalEvent.targetTouches[0].clientX)}function J(a){ba&&(ba=!1)}function K(c){aa=!0;M=c.originalEvent.clientX;a.isDefined(b.staticImages.grabbing)&&(c=z.find("#ivLarge360"),c.css("cursor","url('"+b.staticImages.grabbing+"'), auto"),c.parents(".a-declarative").last().css("cursor","url('"+b.staticImages.grabbing+"'), auto"));return!1}function d(a){aa&&(r(a.originalEvent.clientX-M),M=a.originalEvent.clientX)}function l(c){aa&&(aa=!1,a.isDefined(b.staticImages.grab)&&(c=z.find("#ivLarge360"),
c.css("cursor","url('"+b.staticImages.grab+"'), auto"),c.parents(".a-declarative").last().css("cursor","auto")))}function r(d){ga-=d/P*180;V&&(p.count("dppc_360dragToSpin",b.mediaAsin),c.postCountMetric("dppc_360dragToSpin"));V=!1;for(d=ga;0>d;)d+=360;for(;360<d;)d-=360;ga=d;var e;d=360;for(var f=0;f<C;f++)for(var g=0;g<I.imageLocations[f].length;g++){var h=Math.abs(ga-5*I.imageLocations[f][g]);h<d&&(d=h,e=f*I.imageLocations[0].length+g)}e!==la&&(d=Math.floor(e/I.imageLocations[0].length),d!==Math.floor(la/
I.imageLocations[0].length)&&(a.isDefined(da)||(da=document.createElement("canvas").getContext("2d")),f=z.find("#image-360-sprites").children(),da.drawImage(f[d],0,0)),d=z.find(".iv360Hint").not(".iv360HintFaded"),a.isDefined(d)&&(d.addClass("iv360HintFaded"),d.animate({opacity:0},750)));la=e;d=e%I.imageLocations[0].length*-1*P;e=-1*Math.floor(e/I.imageLocations[0].length)*S;f=z.find("#ivLarge360").children("#image-360-sprites");f.css("-webkit-transform","translate3d("+d+"px, "+e+"px, 0)");f.css("transform",
"translate3d("+d+"px, "+e+"px, 0)")}function q(){if(x){z=f("#ivMain360");var a=n.getCurrentItem().color;F()&&L(a);I=F()?b.spin360ColorData[a]:void 0;w.populateTitle(z.find("#ivTitle360"),160,b);w.populateVariationSelection(z.find("#ivVariationSelection360"));z.find("#ivLarge360").empty();C=0;ha=Z=!1;la=ga=0;ia();x=!1}0!==f("#iv360Tab").height()&&(w.detachImmersiveViewResizeHandler(q),t(),h(),ja=Date.now(),W=V=!0,p.count("dppc_click360",b.mediaAsin),c.postCountMetric("dppc_click360"))}function m(d,
g,h){var k=b.colorToAsin[h],l={},m=500;if(!k||!k.asin)if(h===b.defaultColor)k={asin:b.winningAsin};else return;l.params={asin:k.asin};var r="360"+k.asin,q=Date.now();l.success=function(e){p.time("dppc_asyncRequestTime360",Date.now()-q,b.mediaAsin);c.postTimeMetric("dppc_asyncRequestTime360",Date.now()-q);if(e&&a.isDefined(e.spin360)){if(e=e.spin360.spin360Model)b.spin360ColorData[h]=e,h===n.getCurrentItem().color&&(I=b.spin360ColorData[h],A(),f("#ivThumbs360").hide(),w.unhideTabHeading("iv360TabHeading"),
D(d,g,h));a.ajaxState(r,"success")}else l.error()};l.error=function(){p.count("dppc_asyncFailedTransient360",b.mediaAsin);c.postCountMetric("dppc_asyncFailedTransient360");p.time("dppc_asyncRequestTime360",Date.now()-q,b.mediaAsin);c.postTimeMetric("dppc_asyncRequestTime360",Date.now()-q);m*=2;16E3>=m?setTimeout(function(){q=Date.now();e.load("/gp/product/features/apparel-main-image/360.html",l)},m):(p.count("dppc_asyncFailed360",b.mediaAsin),c.postCountMetric("dppc_asyncFailed360"),a.ajaxState(r,
"fail"))};a.ajaxState(r)&&"fail"!==a.ajaxState(r)||(e.load("/gp/product/features/apparel-main-image/360.html",l),a.ajaxState(r,"sent"))}function D(d,e,f){if(a.isImmersiveViewEnabled(b,n.getCurrentItem().color)&&F()&&L(f)){if(e===b.maxAlts){f=d.find(".item.imageThumbnail");var g=d.find(".item.videoThumbnail");a.isDefined(g)&&1<g.length?g.last().remove():f.last().remove();e--}f=d.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item");k.declarative.create(f,
"button-360-click");d.append(f);e++;p.count("dppc_display360",b.mediaAsin);c.postCountMetric("dppc_display360")}return e}function F(){return b&&a.isDefined(b.spin360ConfigEnabled)&&b.spin360ConfigEnabled}function L(c){return a.isDefinedAndNotEmpty(b.spin360ColorData[c])?!0:a.isDefined(b.spin360LazyLoadEnabled)&&b.spin360LazyLoadEnabled}function v(){W&&(p.time("dppc_duration360",Date.now()-ja,b.mediaAsin),c.postTimeMetric("dppc_duration360",Date.now()-ja),W=!1)}var g,b,n,z,I,P,S,T,R,M,fa,Z=!1,ha=!1,
ga=0,la=0,ja=0,ea=0,aa=!1,ba=!1,C=0,da,V=!0,W=!1,x=!0,ia=k.once(function(){w.attachImmersiveViewResizeHandler(q);w.attachImmersiveViewResizeHandler(t);w.attachImmersiveViewResetHandler(v);w.attachTabDeselectHandler("iv360Tab",v)});return function(c,d,e,h){g=this;b=c;n=d;c=b.landingAsinColor;d=b.defaultColor;a.isDefined(b.staticImages.icon360)&&f("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",w.addStyleCodeToURL(b.staticImages.icon360,"_FMpng_RI_"));F()&&(b.spin360ColorData||
(b.spin360ColorData={}),c===d&&a.isDefinedAndEmpty(b.spin360ColorData[d])&&delete b.spin360ColorData[d]);g.render=function(c,d,e,g,h,k){x=!0;F()&&L(c)?(e=b.spin360ColorData[c],a.isDefinedAndEmpty(e)?w.hideTabHeading("iv360TabHeading"):a.isDefinedAndNotEmpty(e)?(f("#ivThumbs360").hide(),w.unhideTabHeading("iv360TabHeading"),D(g,d,c)):(b.spin360ColorData[c]={},w.hideTabHeading("iv360TabHeading"),m(g,d,c))):w.hideTabHeading("iv360TabHeading")};g.update=function(a){};w.attachTabSelectHandler("iv360Tab",
q)}});B.register("nexusLogger360",function(){return{count:function(k,f){y.ue&&y.ue.event({asin:f,metricName:k,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(k,f,a){y.ue&&y.ue.event({asin:a,metricName:k,metricValue:f},"hit-360","hit360.clientEvent.3")}}});"use strict";B.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(k,f){try{var a=y.location.host,e={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},p=a.split(".")[1],
c=-1===a.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==e[p]?e[p]:"https://www.amazon.com/vap/ew/",w="vse_lazyLoaderHook:success:",t="vse_lazyLoaderHook:error:",h="vse_preLoaderHook:success:",G="vse_preLoaderHook:error:",u="vse_lightPlayerLoaderHook:success:",H="vse_lightPlayerLoaderHook:error:",U=4E3,A=3}catch(E){f.logError("FATAL","vse_ns_desktop","[Domain] ",E)}B.register("vse_ns_preLoaderHook",function(){function a(e,p){try{var d=e.A,l=e.block,r=e.request,q=e.handleFailure,m=e.handleSuccess,
t=d.$;p--;var u=A-p-1,w=d.now();d.ajax(c+"componentbuilder",{params:r,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:r.timeout||U,withCredentials:!0,success:function(a){var b=d.now()-w;k.postTimeMetric(h,b);k.postCountMetric(h+r.page+":"+r.placement+":"+u);t(l).html(a);m(d,r,a)},error:function(c){k.postCountMetric(G+r.page+":"+r.placement+":"+u);(0===c.http.status||500<=c.http.status&&599>=c.http.status)&&0<p?a(e,p):(k.postCountMetric(G,1),q(d,r,c))}})}catch(v){f.logError("FATAL",
"vse_ns_desktop","[vse_ns_preLoaderHook] ",v)}}return{get:function(c,e,d,f,h){a({A:c,block:e,request:d,handleFailure:h,handleSuccess:f},A)}}});B.register("vse_ns_lazyLoaderHook",function(){function a(e,h,d){try{var l=e.A,r=e.context,q=e.handleFailure,m=e.handleSuccess;h.attr("data-configuration");var p=atob(h.attr("data-configuration")),u=JSON.parse(p),y={pageContext:r,configuration:u},v=l.now();d--;var g=A-d-1;l.ajax(c+"subcomponent/"+u.type,{params:y,paramsFormat:"json",method:"post",contentType:"application/json",
timeout:r.timeout||U,withCredentials:!0,success:function(a){var b=l.now()-v;k.postTimeMetric(w,b);k.postCountMetric(w+r.page+":"+r.placement+":"+u.type+":"+g);h.html(a);m(l,y,a)},error:function(b){k.postCountMetric(t+r.page+":"+r.placement+":"+u.type+":"+g);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<d?a(e,h,d):(k.postCountMetric(t,1),q(l,y,b))}})}catch(b){f.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",b)}}return{get:function(c,e,d,f,h){var k=c.$;k(e+" div[data-configuration]").each(function(){a({A:c,
context:d,handleFailure:h,handleSuccess:f},k(this),A)})}}});B.register("vse_ns_videoPlayer",function(){function a(e,h,d){try{var l=e.A,p=e.block,q=e.request,m=e.handleFailure,t=e.handleSuccess,w=l.$;d--;var y=A-d-1,v=l.now();l.ajax(c+"subcomponent/lightvideoplayer",{params:q,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:q.timeout||U,withCredentials:!0,success:function(a){var c=l.now()-v;k.postTimeMetric(u,c);k.postCountMetric(u+q.page+":"+q.placement+":"+
y);w(p).html(a);t(l,q,a)},error:function(b){k.postCountMetric(H+q.page+":"+q.placement+":"+y);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<d?a(e,d):(k.postCountMetric(H,1),m(l,q,b))}})}catch(g){f.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",g)}}return{get:function(c,e,d,f,h){a({A:c,block:e,request:d,handleFailure:h,handleSuccess:f},A)}}})})});